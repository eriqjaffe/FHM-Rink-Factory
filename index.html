<!DOCTYPE HTML>
<meta charset="utf-8">
<html>
<head>
    <title>FHM Rink Factory</title>
    <script type="text/javascript" src="./scripts/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="./scripts/spectrum.js"></script>
    <script type="text/javascript" src="./scripts/fabric.min.js"></script>
	<script type="text/javascript" src="./scripts/context_blender.js"></script>
	<script type="text/javascript" src="./scripts/canvassaver.js"></script>
	<script type="text/javascript" src="./scripts/modernizr.custom.68502.js"></script>
	<script type="text/javascript" src="./scripts/jquery.magnific-popup.min.js"></script>
	<script type="text/javascript" src="./scripts/jquery.mousewheel.min.js"></script>
	<script type="text/javascript" src="./scripts/jquery.fileDownload.js"></script>
	<script type="text/javascript" src="./scripts/jquery.html5storage.min.js"></script>
	<script type="text/javascript" src="./scripts/spin.min.js"></script>
    <link href='./scripts/rinkfactory.css' rel='stylesheet' type='text/css'>
	<link href='./scripts/spectrum.css' rel='stylesheet' type='text/css'>
	<link href='./scripts/menu.css' rel='stylesheet' type='text/css'>
	<link href='./scripts/magnific-popup.css' rel='stylesheet' type='text/css'>
    <script>
        var initialColors = {centerLineColor:"#C8102E",creaseLineColor:"#C8102E",faceOffCircleColor:"#C8102E",faceOffDotColor:"#C8102E",faceOffTargetColor:"#C8102E",blueLineColor:"#0032a0",creaseFillColor:"#41b6e6",creaseStrokeColor:"#C8102E",rinkColor:"#eef0f2",trapezoidFillColor:"rgba(0,0,0,0)",trapezoidStrokeColor:"#C8102E",goalLinesColor:"#C8102E",centerCircleColor:"#0032a0",centerDotColor:"#0032a0",nzFaceOffSpotsColor:"#C8102E",ezFaceOffCirclesColor:"#C8102E",ezFaceOffLinesColor:"#C8102E",ezFaceOffCirclesColor:"#C8102E",ezFaceOffSpotsColor:"#C8102E"};
        var defaultTexture = "ice_scratches.png";
        var prefColorFormat = $.localStorage.getItem('rinkfactory.color_format');
		if (!prefColorFormat) {
			prefColorFormat = "hex";
		}
    </script>
<body>
<div class="title">
    <span class="header">Welcome To The FHM Rink Factory!</span>
</div>
<div id="page">
    <div style="width: 1450px; margin:0 auto;">
        <div class="section group" style="position: relative;">
            <div class="col span_2_of_3" style="float:left;">
                <div id="hiddenContainer" style="display:none;">
					<img src="./images/ice_scratches.png" id="iceScratches">
					<img src="./images/boards2.png" id="boards">
					<img src="./images/nets.png" id="nets">
					<canvas id="textWarp" width="2880" height="1344"></canvas>
					<canvas id="belowFull" width="2880" height="1344"></canvas>
					<canvas id="textureFull" width="2880" height="1344"></canvas>
					<canvas id="compositeFull" width="2880" height="1344"></canvas>
					<canvas id="aboveFull" width="2880" height="1344"></canvas>
					<canvas id="finalFull" width="2880" height="1344"></canvas>
					<!-- <canvas id="texture" width="512" height="512"></canvas>
					<canvas id="below" width="512" height="512"></canvas>
					<canvas id="final" width="512" height="512"></canvas>
					<form id="theForm" method="post" action="./scripts/canvassaverSVG2.php">
						<input type="hidden" id="fileName" name="fileName" value="">
						<input type="hidden" id="belowTexture" name="belowTexture" value="">
						<input type="hidden" id="textureFrm" name="texture" value="">
						<input type="hidden" id="aboveTexture" name="aboveTexture" value="">
					</form> -->
				</div>
                <div id="canvasContainer" style="width:960px; height:575px;">
                    <!--<div id="overlay" class="sample"></div>-->
                    <!--<canvas id="composite" width="960" height="448" style="position:absolute; top:10; left:10; z-index:1;"></canvas>-->
                    <canvas id="below" width="960" height="448" style="position:absolute; top:10; left:10;"></canvas>
                    <!--<canvas id="above" width="960" height="448" style="position:absolute; top:10; left:10; z-index:3;"></canvas>
                    <!--<canvas id="guides" width="512" height="512" style="position:absolute; top:10; left:10; z-index:3; display:none;"></canvas>-->
                    <div id="tipContainer" style="height:60px; padding-top:5px; font-weight:bold;"></div>
                </div>
            </div>
            <div class="col span_1_of_3 " style="float:right; max-height:500px; width:32%;">
            <div id="text">
                <div class="accordion">
                    <div class="accord-header active-header">Main Rink Elements</div>
                    <div class="accord-content" style="display:inline-block;">
                        <table style="width:100%;">
                            <tr>
                                <td>
                                    Team Name: <input type="text" id="teamName">
                                </td>
                                <td><label for="startYear">Start:</label>
									<input type="number" class="year" id="startYear" name="startYear" onkeypress="return isNumberKey(event)">
								</td>
								<td><label for="endYear">End:</label>
									<input type="number" class="year" id="endYear" name="endYear" onkeypress="return isNumberKey(event)">
								</td>
                            </tr>	
                        <table>
                        <table style="width:100%;">
							<tr class="color_tr">
								<td>&nbsp;</td>
								<td><label>Ice Color: </label></td>
								<td style="text-align:right;">
									<input class="baseSelector" type="text" id="rinkColor" data-element="rink_color" data-linkname="rink">
								</td>
							</tr>
							<tr class="color_tr">
                                <td class="checkCell"><input type="checkbox" class="belowTextureToggle" data-canvas="below" data-id="nets" checked></td>
                                <td>Nets</td>
                                <td>&nbsp;</td>
                            </tr>
                            <tr class="color_tr">
                                <td>&nbsp;</td>
                                <td>Center Line:&nbsp;
									<select id="centerLineStyle">
										<option	value="1">Solid</option>
										<option value="2">Small Checkered</option>
										<option value="3">Condensed Checkered</option>
										<option value="4">Candy Stripe Medium</option>
										<option value="5">Candy Stripe Large</option>
										<option value="6">Diamonds</option>
										<option value="7">Inverted Diamonds</option>
									</select>
								</td>
                                <td style="text-align:right;">
                                    <input class="centerLineSelector enabledSelector" type="text" id="centerLineColor" data-element="centerLine1">
                                </td>
                            </tr>
                            <tr class="color_tr">
                                <td>&nbsp;</td>
                                <td><label>Blue Lines: </label></td>
                                <td style="text-align:right;">
                                    <input class="selector enabledSelector" type="text" id="blueLineColor" data-element="blueLines">
                                </td>
                            </tr>
                            <tr class="color_tr">
                                <td>&nbsp;</td>
                                <td><label>Center Ice: </label></td>
                                <td style="text-align:right;">
                                    <input class="selector enabledSelector" type="text" id="centerCircleColor" data-element="centerCircle">
                                    <input class="selector enabledSelector" type="text" id="centerDotColor" data-element="centerDot">
                                </td>
                            </tr>
                            <tr class="color_tr">
                                <td>&nbsp;</td>
                                <td><label>Neutral Zone Face-Off Dots: </label></td>
                                <td style="text-align:right;">
                                    <input class="selector enabledSelector" type="text" id="nzFaceOffSpotsColor" data-element="nzFaceOffSpots">
                                </td>
                            </tr>
                            <tr class="color_tr">
                                <td>&nbsp;</td>
                                <td><label>Defensive Zone Circles: </label></td>
                                <td style="text-align:right;">
                                    <input class="selector enabledSelector" type="text" id="ezFaceOffCirclesColor" data-element="ezFaceOffCircles">
                                    <input class="selector enabledSelector" type="text" id="ezFaceOffLinesColor" data-element="ezFaceOffLines">
                                    <input class="selector enabledSelector" type="text" id="ezFaceOffSpotsColor" data-element="ezFaceOffSpots">
                                </td>
                            </tr>
                            <tr class="color_tr">
                                <td>&nbsp;</td>
                                <td><label>Goal Lines: </label></td>
                                <td style="text-align:right;">
                                    <input class="selector enabledSelector" type="text" id="goalLinesColor" data-element="goalLines">
                                </td>
                            </tr>
                            <tr class="color_tr">
                                <td>&nbsp</td>
                                <td>Crease:&nbsp;
									<select id="creaseStyle">
										<option	value="1">Modern</option>
										<option value="2">Classic</option>
										<option value="3">Retro 1</option>
										<option value="4">Retro 2</option>
									</select>
								</td>	
                                <td style="text-align:right;">
                                    <input class="multiSelector" type="text" id="creaseFillColor" data-element="creaseFill">
                                    <input class="multiSelector" type="text" id="creaseStrokeColor" data-element="creaseStroke">
                                </td>
                            </tr>
                            <tr class="color_tr">
                                <td class="checkCell"><input type="checkbox" class="multiToggle" data-canvas="below" data-id="trapezoid" checked></td>
                                <td><label>Trapezoid: </label></td>
                                <td style="text-align:right;">
                                    <!--<input class="selector enabledSelector" type="text" id="trapezoidFillColor" data-element="trapezoidFill">-->
                                    <input class="selector enabledSelector" type="text" id="trapezoidStrokeColor" data-element="trapezoidStroke">
                                </td>
                            </tr>
                        </table>
                    </div>
					<div class="accord-header inactive-header">Images</div>
					<div class="accord-content">
						<div id="uploadImageDiv">
						<table style="width:100%;">
							<tr>
								<input type="file" id="uploadedImg" accept="image/*" style="display:none;"/>
								<td><center>
									<input type="button" class="button" id="fakeImageButton" value="Upload An Image">
								</td>
							</tr>
						</table>
						</div>
						<div id="selectedImageDiv" style="display:none;">
							<table style="width:100%;"><tr><td><center>
							<b>Selected Image:</b> <span id="fileName"></span>
							</td></tr></table>
						</div>
						<div id="trimImageDiv" style="display:none;">
							<table style="width:100%;">
								<tr>
									<td><center>
										<input type="button" id="makeCrest" class="button" value="Make Crest">
										<input type="button" class="button makePatch" data-sleeve="left" value="Make Left Patch">
										<input type="button" class="button makePatch" data-sleeve="right" value="Make Right Patch">
									</td>
								</tr>
								<tr>
									<td><center>
										<input type="button" id="colorSquare" class="colorSquare" value="Click To Choose Color" style="margin-right:10px;"><span id="chosenCoordinates" style="margin-right:5px;"></span>
										Fuzz %:
										<input type="range" class="range" id="colorFuzz" value="40" min="1" max="100" style="margin-left:5px; margin-right:5px;"> 
										<span id="fuzzAmount">40</span>%
									</td>
								</tr>
								<tr>
									<td><center>
										<input type="button" class="button" id="border" value="Remove Border">
										<input type="button" class="button removeColor" id="removeColorRange" value="Remove Section" data-x="0" data-y="0">
										<input type="button" class="button removeColor" id="removeAllColor" value="Remove All" data-x="0" data-y="0">
										<input type="button" class="button replaceColor" id="replaceColorRange" value="Replace Section" data-x="0" data-y="0">
										<input type="button" class="button replaceColor" id="replaceAllColor" value="Replace All" data-x="0" data-y="0">
									</td>
								</tr>
							</table>
						</div>
						<div id="replaceColorDiv" style="display:none;">
							<table style="width:100%;"><tr>
							<td><center>
							Select Replacement Color:
							<input class="colorSelector" type="text" id="replacementColor" value="#FF0000">
							<input type="button" class="button" id="replaceColorSubmit" value="Replace Color" data-x="0" data-y="0" data-action="null">
							</tr></table>
						</div>
					</div>
                </div>
				<div style="text-align:center; margin-top:5px;">
					<input type="button" class="button" id="straightenObject" value="Reset Object Rotation" style="display:none;">
					<input type="button" class="button" id="save" value="Save Rink">
					<!--<input type="button" class="button" id="zip" value="Zip Sweater">-->
					<!--<input type="button" class="button" id="imgur" value="Upload To Imgur">-->
					<!--<input type="button" class="button" id="clearTexture" value="Clear Custom Texture" style="display:none;">-->
					<input type="button" class="button" id="aboutRinkFactory" value="About Rink Factory">
				</div>
            </div>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    var spinnerOptions = {lines: 13, length: 28, width: 14, radius: 42, scale: 2, corners: 1, color: '#C6011F', opacity: 0.25, rotate: 0, direction: 1, speed: 1, trail: 60, fps: 20, zIndex: 2e9, className: 'spinner', top: '50%', left: '50%', shadow: false, hwaccel: false, position: 'absolute'}
    var target = document.getElementById('overlay');
    var spinner = new Spinner(spinnerOptions).spin(target);

	var imLeft = 488;
	var imTop = 224;

    var can = document.getElementById('below')
    var ctx = can.getContext('2d')

	var canFull = document.getElementById('belowFull');

	var can2Full = document.getElementById('textureFull');
	var textureFullCTX = can2Full.getContext('2d');

    //var can2 = document.getElementById('texture')
    //var texture = can2.getContext('2d')

	var can4Full = document.getElementById('aboveFull');

    var below = new fabric.Canvas('below',{
		enableRetinaScaling: false,
		preserveObjectStacking: true
	});

	below.on('mouse:down', function(options) {
		console.log(options.e)
    	console.log(options.e.layerX, options.e.layerY);
	});

    /* var above = new fabric.Canvas('above',{
		enableRetinaScaling:false,
		evented:false
	}); */

	var belowFull = new fabric.StaticCanvas('belowFull',{enableRetinaScaling:false});
	var textureFull = new fabric.StaticCanvas('textureFull',{enableRetinaScaling:false});
	var aboveFull = new fabric.StaticCanvas('aboveFull',{enableRetinaScaling:false});
	var finalFull = new fabric.StaticCanvas('finalFull',{enableRetinaScaling:false});

    var filter = new fabric.Image.filters.Blur({
        blur: 0.5
    });

    $(document).ready(function() {
        $(".accordion .accord-header").click(function() {
			if($(this).next("div").is(":visible")){
				$(this).next("div").slideUp("fast");
				$(this).removeClass("active-header").addClass("inactive-header");
			} else {
				$(".accordion .accord-content").slideUp("fast");
				$(this).next("div").slideToggle("fast");
				$(".active-header").each(function() {
					$(this).removeClass("active-header").addClass("inactive-header");
				}) 
				$(this).removeClass("inactive-header").addClass("active-header");
			}
		});
		$(":checkbox").each(function(e) {
			if ($(this).is(':checked')) {
				state = true;
			} else {
				state = false;
			}
			$(this).parent().parent().find(".enabledSelector").each(function(e) {				
				if (state == true) {
					$(this).spectrum('enable');
				} else {
					$(this).spectrum('disable');
				}
			})
			$(this).parent().parent().find("input[type=button], input[type=range], select").each(function(e) {
				if (state == true) {
					$(this).prop('disabled',false);
				} else {
					$(this).prop('disabled',true);
				}
			})
		})
        //$(".msDropDown").msDropDown();
    })

    $(document).keydown(function(e) {   
		var obj = below.getActiveObject();
		if (e.shiftKey) {
			var movementDelta = 10;
		} else {
			var movementDelta = 1;
		}
		switch (e.keyCode) {
			case 107: // plus
				if (obj.get('type') == "group") {
					obj.bringToFront();
					below.renderAll();
				}
				return false;
			case 109: // minus
				if (obj.get('type') == "group") {
					obj.sendToBack();
					below.renderAll();
				}
				return false;
			case 37:
				e.preventDefault();
				var a = obj.get('left') - movementDelta;
				obj.set('left', a);
				obj.setCoords();
				below.renderAll();
				break;
			case 38:
				e.preventDefault();
				var a = obj.get('top') - movementDelta;
				obj.set('top', a);
				obj.setCoords();
				below.renderAll();
				break;
			case 39:
				e.preventDefault();
				var a = obj.get('left') + movementDelta;
				obj.set('left', a);
				obj.setCoords();
				below.renderAll();
				break;
			case 40:
				e.preventDefault();
				var a = obj.get('top') + movementDelta;
				obj.set('top', a);
				obj.setCoords();
				below.renderAll();
				break;
			case 46: // delete
				if (obj.get('type') == "image") {
					$("#fileName").html("");
					below.remove(obj);
					below.renderAll();
				}
				$("#tipContainer").html("");
			return false;
		}
		return;
	});
	
	initializeCanvas();

    function initializeCanvas() {
		
        below.setBackgroundColor(initialColors["rinkColor"], below.renderAll.bind(below))
		overlayGroup = new fabric.Group([], {
			visible: true,
			selectable: false,
			evented: false
		})
		
		below.add(overlayGroup)

		fabric.Image.fromURL("./images/ice_scratches.png", function (img) {
			var ice = img.set({
				left: 0, 
                top: 0, 
                scaleX: below.width / img.width,
                scaleY: below.height / img.height,
				id: 'ice',
				visible: true,
				selectable: false,
				evented: false
			})
			overlayGroup.addWithUpdate(ice)
			overlayGroup.setCoords();
			overlayGroup.bringToFront();
			below.renderAll();
		})

		fabric.Image.fromURL("./images/nets.png", function (img) {
			var nets = img.set({
				left: 0, 
                top: 0, 
                scaleX: below.width / img.width,
                scaleY: below.height / img.height,
				id: 'nets',
				visible: true,
				selectable: false,
				evented: false
			})
			overlayGroup.addWithUpdate(nets)
			overlayGroup.setCoords();
			overlayGroup.bringToFront();
			below.renderAll()
		})

		fabric.Image.fromURL("./images/boards2.png", function (img) {
            var boards = img.set({
                left: 0, 
                top: 0, 
                scaleX: below.width / img.width,
                scaleY: below.height / img.height,
				id: 'boards',
				visible: true,
				selectable: false,
				evented: false
            })
            overlayGroup.addWithUpdate(boards);
			overlayGroup.setCoords();
			overlayGroup.bringToFront();
			below.renderAll()
        })

		//console.log(overlayGroup)
		var objects = overlayGroup.getObjects()
		console.log(objects.length)
		for (x in objects) {
			console.log(objects[x])
		}

		centerLineBoards = new fabric.Path("M 476.11719 24.183594 L 476.11719 39.951172 L 484.53125 39.951172 L 484.53125 24.183594 L 476.11719 24.183594 z M 476.11719 407.99023 L 476.11719 423.75781 L 484.53125 423.75781 L 484.53125 407.99023 L 476.11719 407.99023 z",{
			fill: initialColors["centerLineColor"],
			id: 'centerLineBoards',
			visible: true,
			selectable:false,
			evented: false
		});

        centerLine1 = new fabric.Path("M 478.19727 26.119141 L 478.19727 421.29297 L 482.45117 421.29297 L 482.45117 26.119141 L 478.19727 26.119141 z",{
			fill: initialColors["centerLineColor"],
			id: 'centerLine1',
			visible: true,
			selectable:false,
			evented: false
		});

		centerLine2 = new fabric.Path("M 478.19727 26.716797 L 478.19727 36.335938 L 478.19727 45.955078 L 478.19727 55.572266 L 478.19727 65.191406 L 478.19727 74.810547 L 478.19727 84.429688 L 478.19727 94.046875 L 478.19727 103.66602 L 478.19727 113.28516 L 478.19727 122.90234 L 478.19727 132.52148 L 478.19727 142.14062 L 478.19727 151.75977 L 478.19727 161.37695 L 478.19727 170.99609 L 478.19727 180.61523 L 478.19727 190.23242 L 478.19727 199.85156 L 478.19727 209.4707 L 478.19727 219.08984 L 478.19727 228.70703 L 478.19727 238.32617 L 478.19727 247.94531 L 478.19727 257.5625 L 478.19727 267.18164 L 478.19727 276.80078 L 478.19727 286.41992 L 478.19727 296.03711 L 478.19727 305.65625 L 478.19727 315.27539 L 478.19727 324.89258 L 478.19727 334.51172 L 478.19727 344.13086 L 478.19727 353.75 L 478.19727 363.36719 L 478.19727 372.98633 L 478.19727 382.60547 L 478.19727 392.22461 L 478.19727 401.8418 L 478.19727 411.46094 L 478.19727 421.08008 L 478.19727 430.69727 L 482.45117 430.69727 L 482.45117 421.08008 L 482.45117 411.46094 L 482.45117 401.8418 L 482.45117 392.22461 L 482.45117 382.60547 L 482.45117 372.98633 L 482.45117 363.36719 L 482.45117 353.75 L 482.45117 344.13086 L 482.45117 334.51172 L 482.45117 324.89258 L 482.45117 315.27539 L 482.45117 305.65625 L 482.45117 296.03711 L 482.45117 286.41992 L 482.45117 276.80078 L 482.45117 267.18164 L 482.45117 257.5625 L 482.45117 247.94531 L 482.45117 238.32617 L 482.45117 228.70703 L 482.45117 219.08984 L 482.45117 209.4707 L 482.45117 199.85156 L 482.45117 190.23242 L 482.45117 180.61523 L 482.45117 170.99609 L 482.45117 161.37695 L 482.45117 151.75977 L 482.45117 142.14062 L 482.45117 132.52148 L 482.45117 122.90234 L 482.45117 113.28516 L 482.45117 103.66602 L 482.45117 94.046875 L 482.45117 84.429688 L 482.45117 74.810547 L 482.45117 65.191406 L 482.45117 55.572266 L 482.45117 45.955078 L 482.45117 36.335938 L 482.45117 26.716797 L 478.19727 26.716797 z M 478.75195 29.128906 L 481.89648 29.128906 L 481.89648 33.925781 L 478.75195 33.925781 L 478.75195 29.128906 z M 478.75195 38.746094 L 481.89648 38.746094 L 481.89648 43.544922 L 478.75195 43.544922 L 478.75195 38.746094 z M 478.75195 48.365234 L 481.89648 48.365234 L 481.89648 53.162109 L 478.75195 53.162109 L 478.75195 48.365234 z M 478.75195 57.984375 L 481.89648 57.984375 L 481.89648 62.78125 L 478.75195 62.78125 L 478.75195 57.984375 z M 478.75195 67.601562 L 481.89648 67.601562 L 481.89648 72.400391 L 478.75195 72.400391 L 478.75195 67.601562 z M 478.75195 77.220703 L 481.89648 77.220703 L 481.89648 82.017578 L 478.75195 82.017578 L 478.75195 77.220703 z M 478.75195 86.839844 L 481.89648 86.839844 L 481.89648 91.636719 L 478.75195 91.636719 L 478.75195 86.839844 z M 478.75195 96.458984 L 481.89648 96.458984 L 481.89648 101.25586 L 478.75195 101.25586 L 478.75195 96.458984 z M 478.75195 106.07617 L 481.89648 106.07617 L 481.89648 110.875 L 478.75195 110.875 L 478.75195 106.07617 z M 478.75195 115.69531 L 481.89648 115.69531 L 481.89648 120.49219 L 478.75195 120.49219 L 478.75195 115.69531 z M 478.75195 125.31445 L 481.89648 125.31445 L 481.89648 130.11133 L 478.75195 130.11133 L 478.75195 125.31445 z M 478.75195 134.93164 L 481.89648 134.93164 L 481.89648 139.73047 L 478.75195 139.73047 L 478.75195 134.93164 z M 478.75195 144.55078 L 481.89648 144.55078 L 481.89648 149.34766 L 478.75195 149.34766 L 478.75195 144.55078 z M 478.75195 154.16992 L 481.89648 154.16992 L 481.89648 158.9668 L 478.75195 158.9668 L 478.75195 154.16992 z M 478.75195 163.78906 L 481.89648 163.78906 L 481.89648 168.58594 L 478.75195 168.58594 L 478.75195 163.78906 z M 478.75195 173.40625 L 481.89648 173.40625 L 481.89648 178.20508 L 478.75195 178.20508 L 478.75195 173.40625 z M 478.75195 183.02539 L 481.89648 183.02539 L 481.89648 187.82227 L 478.75195 187.82227 L 478.75195 183.02539 z M 478.75195 192.64453 L 481.89648 192.64453 L 481.89648 197.44141 L 478.75195 197.44141 L 478.75195 192.64453 z M 478.75195 202.26172 L 481.89648 202.26172 L 481.89648 207.06055 L 478.75195 207.06055 L 478.75195 202.26172 z M 478.75195 211.88086 L 481.89648 211.88086 L 481.89648 216.67773 L 478.75195 216.67773 L 478.75195 211.88086 z M 478.75195 221.5 L 481.89648 221.5 L 481.89648 226.29688 L 478.75195 226.29688 L 478.75195 221.5 z M 478.75195 231.11914 L 481.89648 231.11914 L 481.89648 235.91602 L 478.75195 235.91602 L 478.75195 231.11914 z M 478.75195 240.73633 L 481.89648 240.73633 L 481.89648 245.53516 L 478.75195 245.53516 L 478.75195 240.73633 z M 478.75195 250.35547 L 481.89648 250.35547 L 481.89648 255.15234 L 478.75195 255.15234 L 478.75195 250.35547 z M 478.75195 259.97461 L 481.89648 259.97461 L 481.89648 264.77148 L 478.75195 264.77148 L 478.75195 259.97461 z M 478.75195 269.5918 L 481.89648 269.5918 L 481.89648 274.39062 L 478.75195 274.39062 L 478.75195 269.5918 z M 478.75195 279.21094 L 481.89648 279.21094 L 481.89648 284.00781 L 478.75195 284.00781 L 478.75195 279.21094 z M 478.75195 288.83008 L 481.89648 288.83008 L 481.89648 293.62695 L 478.75195 293.62695 L 478.75195 288.83008 z M 478.75195 298.44922 L 481.89648 298.44922 L 481.89648 303.24609 L 478.75195 303.24609 L 478.75195 298.44922 z M 478.75195 308.06641 L 481.89648 308.06641 L 481.89648 312.86523 L 478.75195 312.86523 L 478.75195 308.06641 z M 478.75195 317.68555 L 481.89648 317.68555 L 481.89648 322.48242 L 478.75195 322.48242 L 478.75195 317.68555 z M 478.75195 327.30469 L 481.89648 327.30469 L 481.89648 332.10156 L 478.75195 332.10156 L 478.75195 327.30469 z M 478.75195 336.92188 L 481.89648 336.92188 L 481.89648 341.7207 L 478.75195 341.7207 L 478.75195 336.92188 z M 478.75195 346.54102 L 481.89648 346.54102 L 481.89648 351.33789 L 478.75195 351.33789 L 478.75195 346.54102 z M 478.75195 356.16016 L 481.89648 356.16016 L 481.89648 360.95703 L 478.75195 360.95703 L 478.75195 356.16016 z M 478.75195 365.7793 L 481.89648 365.7793 L 481.89648 370.57617 L 478.75195 370.57617 L 478.75195 365.7793 z M 478.75195 375.39648 L 481.89648 375.39648 L 481.89648 380.19531 L 478.75195 380.19531 L 478.75195 375.39648 z M 478.75195 385.01562 L 481.89648 385.01562 L 481.89648 389.8125 L 478.75195 389.8125 L 478.75195 385.01562 z M 478.75195 394.63477 L 481.89648 394.63477 L 481.89648 399.43164 L 478.75195 399.43164 L 478.75195 394.63477 z M 478.75195 404.25195 L 481.89648 404.25195 L 481.89648 409.05078 L 478.75195 409.05078 L 478.75195 404.25195 z M 478.75195 413.87109 L 481.89648 413.87109 L 481.89648 418.66797 L 478.75195 418.66797 L 478.75195 413.87109 z M 478.75195 423.49023 L 481.89648 423.49023 L 481.89648 428.28711 L 478.75195 428.28711 L 478.75195 423.49023 z",{
			fill: initialColors["centerLineColor"],
			id: 'centerLine2',
			visible: false,
			selectable:false,
			evented: false
		});

		centerLine3 = new fabric.Path("M 478.19727 22.402344 L 478.19727 22.9375 L 478.19727 30.615234 L 478.19727 31.150391 L 478.19727 38.828125 L 478.19727 39.363281 L 478.19727 47.041016 L 478.19727 47.576172 L 478.19727 55.253906 L 478.19727 55.789062 L 478.19727 63.466797 L 478.19727 64.001953 L 478.19727 71.679688 L 478.19727 72.214844 L 478.19727 79.892578 L 478.19727 80.427734 L 478.19727 88.105469 L 478.19727 88.640625 L 478.19727 96.318359 L 478.19727 96.853516 L 478.19727 104.53125 L 478.19727 105.06641 L 478.19727 112.74414 L 478.19727 113.2793 L 478.19727 120.95703 L 478.19727 121.49219 L 478.19727 129.16992 L 478.19727 129.70508 L 478.19727 137.38281 L 478.19727 137.91797 L 478.19727 145.5957 L 478.19727 146.13086 L 478.19727 153.80859 L 478.19727 154.34375 L 478.19727 162.02148 L 478.19727 162.55664 L 478.19727 170.23438 L 478.19727 170.76953 L 478.19727 178.44727 L 478.19727 178.98242 L 478.19727 186.66016 L 478.19727 187.19531 L 478.19727 194.87305 L 478.19727 195.4082 L 478.19727 203.08594 L 478.19727 203.62109 L 478.19727 211.29883 L 478.19727 211.83398 L 478.19727 219.51172 L 478.19727 220.04688 L 478.19727 227.72461 L 478.19727 228.26172 L 478.19727 235.9375 L 478.19727 236.47461 L 478.19727 244.15039 L 478.19727 244.6875 L 478.19727 252.36328 L 478.19727 252.90039 L 478.19727 260.57617 L 478.19727 261.11328 L 478.19727 268.78906 L 478.19727 269.32617 L 478.19727 277.00195 L 478.19727 277.53906 L 478.19727 285.21484 L 478.19727 285.75195 L 478.19727 293.42773 L 478.19727 293.96484 L 478.19727 301.64062 L 478.19727 302.17773 L 478.19727 309.85352 L 478.19727 310.39062 L 478.19727 318.06641 L 478.19727 318.60352 L 478.19727 326.2793 L 478.19727 326.81641 L 478.19727 334.49219 L 478.19727 335.0293 L 478.19727 342.70508 L 478.19727 343.24219 L 478.19727 350.91797 L 478.19727 351.45508 L 478.19727 359.13086 L 478.19727 359.66797 L 478.19727 367.34375 L 478.19727 367.88086 L 478.19727 375.55664 L 478.19727 376.09375 L 478.19727 383.76953 L 478.19727 384.30664 L 478.19727 391.98242 L 478.19727 392.51953 L 478.19727 400.19531 L 478.19727 400.73242 L 478.19727 408.4082 L 478.19727 408.94531 L 478.19727 416.62109 L 478.19727 417.1582 L 478.19727 424.83398 L 478.19727 425.37109 L 482.45117 425.37109 L 482.45117 424.83398 L 482.45117 417.1582 L 482.45117 416.62109 L 482.45117 408.4082 L 482.45117 400.19531 L 482.45117 391.98242 L 482.45117 383.76953 L 482.45117 375.55664 L 482.45117 367.34375 L 482.45117 359.13086 L 482.45117 350.91797 L 482.45117 342.70508 L 482.45117 334.49219 L 482.45117 326.2793 L 482.45117 318.06641 L 482.45117 309.85352 L 482.45117 301.64062 L 482.45117 293.42773 L 482.45117 285.21484 L 482.45117 277.00195 L 482.45117 268.78906 L 482.45117 260.57617 L 482.45117 252.36328 L 482.45117 244.15039 L 482.45117 235.9375 L 482.45117 227.72461 L 482.45117 219.51172 L 482.45117 211.29883 L 482.45117 203.08594 L 482.45117 194.87305 L 482.45117 186.66016 L 482.45117 178.44727 L 482.45117 170.23438 L 482.45117 162.02148 L 482.45117 153.80859 L 482.45117 145.5957 L 482.45117 137.38281 L 482.45117 129.16992 L 482.45117 120.95703 L 482.45117 112.74414 L 482.45117 104.53125 L 482.45117 96.318359 L 482.45117 88.105469 L 482.45117 79.892578 L 482.45117 71.679688 L 482.45117 63.466797 L 482.45117 55.253906 L 482.45117 47.041016 L 482.45117 38.828125 L 482.45117 30.615234 L 482.45117 22.402344 L 478.19727 22.402344 z M 478.73438 22.9375 L 481.91602 22.9375 L 481.91602 30.615234 L 478.73438 30.615234 L 478.73438 22.9375 z M 478.73438 31.150391 L 481.91602 31.150391 L 481.91602 38.828125 L 478.73438 38.828125 L 478.73438 31.150391 z M 478.73438 39.363281 L 481.91602 39.363281 L 481.91602 47.041016 L 478.73438 47.041016 L 478.73438 39.363281 z M 478.73438 47.576172 L 481.91602 47.576172 L 481.91602 55.253906 L 478.73438 55.253906 L 478.73438 47.576172 z M 478.73438 55.789062 L 481.91602 55.789062 L 481.91602 63.466797 L 478.73438 63.466797 L 478.73438 55.789062 z M 478.73438 64.001953 L 481.91602 64.001953 L 481.91602 71.679688 L 478.73438 71.679688 L 478.73438 64.001953 z M 478.73438 72.214844 L 481.91602 72.214844 L 481.91602 79.892578 L 478.73438 79.892578 L 478.73438 72.214844 z M 478.73438 80.427734 L 481.91602 80.427734 L 481.91602 88.105469 L 478.73438 88.105469 L 478.73438 80.427734 z M 478.73438 88.640625 L 481.91602 88.640625 L 481.91602 96.318359 L 478.73438 96.318359 L 478.73438 88.640625 z M 478.73438 96.853516 L 481.91602 96.853516 L 481.91602 104.53125 L 478.73438 104.53125 L 478.73438 96.853516 z M 478.73438 105.06641 L 481.91602 105.06641 L 481.91602 112.74414 L 478.73438 112.74414 L 478.73438 105.06641 z M 478.73438 113.2793 L 481.91602 113.2793 L 481.91602 120.95703 L 478.73438 120.95703 L 478.73438 113.2793 z M 478.73438 121.49219 L 481.91602 121.49219 L 481.91602 129.16992 L 478.73438 129.16992 L 478.73438 121.49219 z M 478.73438 129.70508 L 481.91602 129.70508 L 481.91602 137.38281 L 478.73438 137.38281 L 478.73438 129.70508 z M 478.73438 137.91797 L 481.91602 137.91797 L 481.91602 145.5957 L 478.73438 145.5957 L 478.73438 137.91797 z M 478.73438 146.13086 L 481.91602 146.13086 L 481.91602 153.80859 L 478.73438 153.80859 L 478.73438 146.13086 z M 478.73438 154.34375 L 481.91602 154.34375 L 481.91602 162.02148 L 478.73438 162.02148 L 478.73438 154.34375 z M 478.73438 162.55664 L 481.91602 162.55664 L 481.91602 170.23438 L 478.73438 170.23438 L 478.73438 162.55664 z M 478.73438 170.76953 L 481.91602 170.76953 L 481.91602 178.44727 L 478.73438 178.44727 L 478.73438 170.76953 z M 478.73438 178.98242 L 481.91602 178.98242 L 481.91602 186.66016 L 478.73438 186.66016 L 478.73438 178.98242 z M 478.73438 187.19531 L 481.91602 187.19531 L 481.91602 194.87305 L 478.73438 194.87305 L 478.73438 187.19531 z M 478.73438 195.4082 L 481.91602 195.4082 L 481.91602 203.08594 L 478.73438 203.08594 L 478.73438 195.4082 z M 478.73438 203.62109 L 481.91602 203.62109 L 481.91602 211.29883 L 478.73438 211.29883 L 478.73438 203.62109 z M 478.73438 211.83398 L 481.91602 211.83398 L 481.91602 219.51172 L 478.73438 219.51172 L 478.73438 211.83398 z M 478.73438 228.26172 L 481.91602 228.26172 L 481.91602 235.9375 L 478.73438 235.9375 L 478.73438 228.26172 z M 478.73438 236.47461 L 481.91602 236.47461 L 481.91602 244.15039 L 478.73438 244.15039 L 478.73438 236.47461 z M 478.73438 244.6875 L 481.91602 244.6875 L 481.91602 252.36328 L 478.73438 252.36328 L 478.73438 244.6875 z M 478.73438 252.90039 L 481.91602 252.90039 L 481.91602 260.57617 L 478.73438 260.57617 L 478.73438 252.90039 z M 478.73438 261.11328 L 481.91602 261.11328 L 481.91602 268.78906 L 478.73438 268.78906 L 478.73438 261.11328 z M 478.73438 269.32617 L 481.91602 269.32617 L 481.91602 277.00195 L 478.73438 277.00195 L 478.73438 269.32617 z M 478.73438 277.53906 L 481.91602 277.53906 L 481.91602 285.21484 L 478.73438 285.21484 L 478.73438 277.53906 z M 478.73438 285.75195 L 481.91602 285.75195 L 481.91602 293.42773 L 478.73438 293.42773 L 478.73438 285.75195 z M 478.73438 293.96484 L 481.91602 293.96484 L 481.91602 301.64062 L 478.73438 301.64062 L 478.73438 293.96484 z M 478.73438 302.17773 L 481.91602 302.17773 L 481.91602 309.85352 L 478.73438 309.85352 L 478.73438 302.17773 z M 478.73438 310.39062 L 481.91602 310.39062 L 481.91602 318.06641 L 478.73438 318.06641 L 478.73438 310.39062 z M 478.73438 318.60352 L 481.91602 318.60352 L 481.91602 326.2793 L 478.73438 326.2793 L 478.73438 318.60352 z M 478.73438 326.81641 L 481.91602 326.81641 L 481.91602 334.49219 L 478.73438 334.49219 L 478.73438 326.81641 z M 478.73438 335.0293 L 481.91602 335.0293 L 481.91602 342.70508 L 478.73438 342.70508 L 478.73438 335.0293 z M 478.73438 343.24219 L 481.91602 343.24219 L 481.91602 350.91797 L 478.73438 350.91797 L 478.73438 343.24219 z M 478.73438 351.45508 L 481.91602 351.45508 L 481.91602 359.13086 L 478.73438 359.13086 L 478.73438 351.45508 z M 478.73438 359.66797 L 481.91602 359.66797 L 481.91602 367.34375 L 478.73438 367.34375 L 478.73438 359.66797 z M 478.73438 367.88086 L 481.91602 367.88086 L 481.91602 375.55664 L 478.73438 375.55664 L 478.73438 367.88086 z M 478.73438 376.09375 L 481.91602 376.09375 L 481.91602 383.76953 L 478.73438 383.76953 L 478.73438 376.09375 z M 478.73438 384.30664 L 481.91602 384.30664 L 481.91602 391.98242 L 478.73438 391.98242 L 478.73438 384.30664 z M 478.73438 392.51953 L 481.91602 392.51953 L 481.91602 400.19531 L 478.73438 400.19531 L 478.73438 392.51953 z M 478.73438 400.73242 L 481.91602 400.73242 L 481.91602 408.4082 L 478.73438 408.4082 L 478.73438 400.73242 z M 478.73438 408.94531 L 481.91602 408.94531 L 481.91602 416.62109 L 478.73438 416.62109 L 478.73438 408.94531 z M 478.73438 417.1582 L 481.91602 417.1582 L 481.91602 424.83398 L 478.73438 424.83398 L 478.73438 417.1582 z",{
			fill: initialColors["centerLineColor"],
			id: 'centerLine3',
			visible: false,
			selectable:false,
			evented: false
		});

		centerLine4 = new fabric.Path("M 478.19727 20.470703 L 478.19727 28.607422 L 478.19727 36.744141 L 478.19727 44.880859 L 478.19727 53.017578 L 478.19727 61.154297 L 478.19727 69.291016 L 478.19727 77.427734 L 478.19727 85.564453 L 478.19727 93.699219 L 478.19727 101.83594 L 478.19727 109.97266 L 478.19727 118.10938 L 478.19727 126.24609 L 478.19727 134.38281 L 478.19727 142.51953 L 478.19727 150.65625 L 478.19727 158.79297 L 478.19727 166.92969 L 478.19727 175.06641 L 478.19727 183.20312 L 478.19727 191.33984 L 478.19727 199.47656 L 478.19727 207.61328 L 478.19727 215.75 L 478.19727 223.88672 L 478.19727 232.02344 L 478.19727 240.1582 L 478.19727 248.29492 L 478.19727 256.43164 L 478.19727 264.56836 L 478.19727 272.70508 L 478.19727 280.8418 L 478.19727 288.97852 L 478.19727 297.11523 L 478.19727 305.25195 L 478.19727 313.38867 L 478.19727 321.52539 L 478.19727 329.66211 L 478.19727 337.79883 L 478.19727 345.93555 L 478.19727 354.07227 L 478.19727 362.20898 L 478.19727 370.3457 L 478.19727 378.48242 L 478.19727 386.61719 L 478.19727 394.75391 L 478.19727 402.89062 L 478.19727 411.02734 L 478.19727 419.16406 L 478.19727 427.30078 L 482.45117 427.30078 L 482.45117 419.16406 L 482.45117 411.02734 L 482.45117 402.89062 L 482.45117 394.75391 L 482.45117 386.61719 L 482.45117 378.48242 L 482.45117 370.3457 L 482.45117 362.20898 L 482.45117 354.07227 L 482.45117 345.93555 L 482.45117 337.79883 L 482.45117 329.66211 L 482.45117 321.52539 L 482.45117 313.38867 L 482.45117 305.25195 L 482.45117 297.11523 L 482.45117 288.97852 L 482.45117 280.8418 L 482.45117 272.70508 L 482.45117 264.56836 L 482.45117 256.43164 L 482.45117 248.29492 L 482.45117 240.1582 L 482.45117 232.02344 L 482.45117 223.88672 L 482.45117 215.75 L 482.45117 207.61328 L 482.45117 199.47656 L 482.45117 191.33984 L 482.45117 183.20312 L 482.45117 175.06641 L 482.45117 166.92969 L 482.45117 158.79297 L 482.45117 150.65625 L 482.45117 142.51953 L 482.45117 134.38281 L 482.45117 126.24609 L 482.45117 118.10938 L 482.45117 109.97266 L 482.45117 101.83594 L 482.45117 93.699219 L 482.45117 85.564453 L 482.45117 77.427734 L 482.45117 69.291016 L 482.45117 61.154297 L 482.45117 53.017578 L 482.45117 44.880859 L 482.45117 36.744141 L 482.45117 28.607422 L 482.45117 20.470703 L 478.19727 20.470703 z M 481.97852 21.820312 L 481.97852 26.210938 L 478.66992 27.255859 L 478.66992 22.867188 L 481.97852 21.820312 z M 481.97852 29.957031 L 481.97852 34.347656 L 478.66992 35.392578 L 478.66992 31.003906 L 481.97852 29.957031 z M 481.97852 38.09375 L 481.97852 42.484375 L 478.66992 43.529297 L 478.66992 39.140625 L 481.97852 38.09375 z M 481.97852 46.230469 L 481.97852 50.621094 L 478.66992 51.666016 L 478.66992 47.277344 L 481.97852 46.230469 z M 481.97852 54.367188 L 481.97852 58.757812 L 478.66992 59.802734 L 478.66992 55.412109 L 481.97852 54.367188 z M 481.97852 62.503906 L 481.97852 66.894531 L 478.66992 67.939453 L 478.66992 63.548828 L 481.97852 62.503906 z M 481.97852 70.640625 L 481.97852 75.03125 L 478.66992 76.076172 L 478.66992 71.685547 L 481.97852 70.640625 z M 481.97852 78.777344 L 481.97852 83.167969 L 478.66992 84.212891 L 478.66992 79.822266 L 481.97852 78.777344 z M 481.97852 86.914062 L 481.97852 91.304688 L 478.66992 92.349609 L 478.66992 87.958984 L 481.97852 86.914062 z M 481.97852 95.050781 L 481.97852 99.441406 L 478.66992 100.48633 L 478.66992 96.095703 L 481.97852 95.050781 z M 481.97852 103.1875 L 481.97852 107.57812 L 478.66992 108.62305 L 478.66992 104.23242 L 481.97852 103.1875 z M 481.97852 111.32422 L 481.97852 115.71484 L 478.66992 116.75977 L 478.66992 112.36914 L 481.97852 111.32422 z M 481.97852 119.46094 L 481.97852 123.85156 L 478.66992 124.89648 L 478.66992 120.50586 L 481.97852 119.46094 z M 481.97852 127.59766 L 481.97852 131.98828 L 478.66992 133.0332 L 478.66992 128.64258 L 481.97852 127.59766 z M 481.97852 135.73438 L 481.97852 140.125 L 478.66992 141.16992 L 478.66992 136.7793 L 481.97852 135.73438 z M 481.97852 143.87109 L 481.97852 148.25977 L 478.66992 149.30664 L 478.66992 144.91602 L 481.97852 143.87109 z M 481.97852 152.00781 L 481.97852 156.39648 L 478.66992 157.44336 L 478.66992 153.05273 L 481.97852 152.00781 z M 481.97852 160.14258 L 481.97852 164.5332 L 478.66992 165.58008 L 478.66992 161.18945 L 481.97852 160.14258 z M 481.97852 168.2793 L 481.97852 172.66992 L 478.66992 173.71484 L 478.66992 169.32617 L 481.97852 168.2793 z M 481.97852 176.41602 L 481.97852 180.80664 L 478.66992 181.85156 L 478.66992 177.46289 L 481.97852 176.41602 z M 481.97852 184.55273 L 481.97852 188.94336 L 478.66992 189.98828 L 478.66992 185.59961 L 481.97852 184.55273 z M 481.97852 192.68945 L 481.97852 197.08008 L 478.66992 198.125 L 478.66992 193.73438 L 481.97852 192.68945 z M 481.97852 200.82617 L 481.97852 205.2168 L 478.66992 206.26172 L 478.66992 201.87109 L 481.97852 200.82617 z M 481.97852 208.96289 L 481.97852 213.35352 L 478.66992 214.39844 L 478.66992 210.00781 L 481.97852 208.96289 z M 481.97852 217.09961 L 481.97852 221.49023 L 478.66992 222.53516 L 478.66992 218.14453 L 481.97852 217.09961 z M 481.97852 225.23633 L 481.97852 229.62695 L 478.66992 230.67188 L 478.66992 226.28125 L 481.97852 225.23633 z M 481.97852 233.37305 L 481.97852 237.76367 L 478.66992 238.80859 L 478.66992 234.41797 L 481.97852 233.37305 z M 481.97852 241.50977 L 481.97852 245.90039 L 478.66992 246.94531 L 478.66992 242.55469 L 481.97852 241.50977 z M 481.97852 249.64648 L 481.97852 254.03711 L 478.66992 255.08203 L 478.66992 250.69141 L 481.97852 249.64648 z M 481.97852 257.7832 L 481.97852 262.17383 L 478.66992 263.21875 L 478.66992 258.82812 L 481.97852 257.7832 z M 481.97852 265.91992 L 481.97852 270.31055 L 478.66992 271.35547 L 478.66992 266.96484 L 481.97852 265.91992 z M 481.97852 274.05664 L 481.97852 278.44727 L 478.66992 279.49219 L 478.66992 275.10156 L 481.97852 274.05664 z M 481.97852 282.19336 L 481.97852 286.58398 L 478.66992 287.62891 L 478.66992 283.23828 L 481.97852 282.19336 z M 481.97852 290.33008 L 481.97852 294.71875 L 478.66992 295.76562 L 478.66992 291.375 L 481.97852 290.33008 z M 481.97852 298.4668 L 481.97852 302.85547 L 478.66992 303.90234 L 478.66992 299.51172 L 481.97852 298.4668 z M 481.97852 306.60156 L 481.97852 310.99219 L 478.66992 312.03906 L 478.66992 307.64844 L 481.97852 306.60156 z M 481.97852 314.73828 L 481.97852 319.12891 L 478.66992 320.17383 L 478.66992 315.78516 L 481.97852 314.73828 z M 481.97852 322.875 L 481.97852 327.26562 L 478.66992 328.31055 L 478.66992 323.92188 L 481.97852 322.875 z M 481.97852 331.01172 L 481.97852 335.40234 L 478.66992 336.44727 L 478.66992 332.05859 L 481.97852 331.01172 z M 481.97852 339.14844 L 481.97852 343.53906 L 478.66992 344.58398 L 478.66992 340.19336 L 481.97852 339.14844 z M 481.97852 347.28516 L 481.97852 351.67578 L 478.66992 352.7207 L 478.66992 348.33008 L 481.97852 347.28516 z M 481.97852 355.42188 L 481.97852 359.8125 L 478.66992 360.85742 L 478.66992 356.4668 L 481.97852 355.42188 z M 481.97852 363.55859 L 481.97852 367.94922 L 478.66992 368.99414 L 478.66992 364.60352 L 481.97852 363.55859 z M 481.97852 371.69531 L 481.97852 376.08594 L 478.66992 377.13086 L 478.66992 372.74023 L 481.97852 371.69531 z M 481.97852 379.83203 L 481.97852 384.22266 L 478.66992 385.26758 L 478.66992 380.87695 L 481.97852 379.83203 z M 481.97852 387.96875 L 481.97852 392.35938 L 478.66992 393.4043 L 478.66992 389.01367 L 481.97852 387.96875 z M 481.97852 396.10547 L 481.97852 400.49609 L 478.66992 401.54102 L 478.66992 397.15039 L 481.97852 396.10547 z M 481.97852 404.24219 L 481.97852 408.63281 L 478.66992 409.67773 L 478.66992 405.28711 L 481.97852 404.24219 z M 481.97852 412.37891 L 481.97852 416.76953 L 478.66992 417.81445 L 478.66992 413.42383 L 481.97852 412.37891 z M 481.97852 420.51562 L 481.97852 424.90625 L 478.66992 425.95117 L 478.66992 421.56055 L 481.97852 420.51562 z",{
			fill: initialColors["centerLineColor"],
			id: 'centerLine4',
			visible: false,
			selectable:false,
			evented: false
		});

		centerLine5 = new fabric.Path("M 478.19727 18.113281 L 478.19727 36.005859 L 478.19727 53.900391 L 478.19727 71.792969 L 478.19727 89.685547 L 478.19727 107.58008 L 478.19727 125.47266 L 478.19727 143.36523 L 478.19727 161.25977 L 478.19727 179.15234 L 478.19727 197.04492 L 478.19727 214.93945 L 478.19727 232.83203 L 478.19727 250.72461 L 478.19727 268.61914 L 478.19727 286.51172 L 478.19727 304.4043 L 478.19727 322.29883 L 478.19727 340.19141 L 478.19727 358.08398 L 478.19727 375.97852 L 478.19727 393.87109 L 478.19727 411.76367 L 478.19727 429.6582 L 482.45117 429.6582 L 482.45117 411.76367 L 482.45117 393.87109 L 482.45117 375.97852 L 482.45117 358.08398 L 482.45117 340.19141 L 482.45117 322.29883 L 482.45117 304.4043 L 482.45117 286.51172 L 482.45117 268.61914 L 482.45117 250.72461 L 482.45117 232.83203 L 482.45117 214.93945 L 482.45117 197.04492 L 482.45117 179.15234 L 482.45117 161.25977 L 482.45117 143.36523 L 482.45117 125.47266 L 482.45117 107.58008 L 482.45117 89.685547 L 482.45117 71.792969 L 482.45117 53.900391 L 482.45117 36.005859 L 482.45117 18.113281 L 478.19727 18.113281 z M 478.84766 22.552734 L 481.80078 24.123047 L 481.80078 31.566406 L 478.84766 29.996094 L 478.84766 22.552734 z M 478.84766 40.445312 L 481.80078 42.017578 L 481.80078 49.460938 L 478.84766 47.888672 L 478.84766 40.445312 z M 478.84766 58.339844 L 481.80078 59.910156 L 481.80078 67.353516 L 478.84766 65.783203 L 478.84766 58.339844 z M 478.84766 76.232422 L 481.80078 77.802734 L 481.80078 85.246094 L 478.84766 83.675781 L 478.84766 76.232422 z M 478.84766 94.125 L 481.80078 95.697266 L 481.80078 103.14062 L 478.84766 101.56836 L 478.84766 94.125 z M 478.84766 112.01953 L 481.80078 113.58984 L 481.80078 121.0332 L 478.84766 119.46289 L 478.84766 112.01953 z M 478.84766 129.91211 L 481.80078 131.48242 L 481.80078 138.92578 L 478.84766 137.35547 L 478.84766 129.91211 z M 478.84766 147.80469 L 481.80078 149.37695 L 481.80078 156.82031 L 478.84766 155.24805 L 478.84766 147.80469 z M 478.84766 165.69922 L 481.80078 167.26953 L 481.80078 174.71289 L 478.84766 173.14258 L 478.84766 165.69922 z M 478.84766 183.5918 L 481.80078 185.16211 L 481.80078 192.60547 L 478.84766 191.03516 L 478.84766 183.5918 z M 478.84766 201.48438 L 481.80078 203.05664 L 481.80078 210.5 L 478.84766 208.92969 L 478.84766 201.48438 z M 478.84766 219.37891 L 481.80078 220.94922 L 481.80078 228.39258 L 478.84766 226.82227 L 478.84766 219.37891 z M 478.84766 237.27148 L 481.80078 238.8418 L 481.80078 246.28516 L 478.84766 244.71484 L 478.84766 237.27148 z M 478.84766 255.16406 L 481.80078 256.73633 L 481.80078 264.17969 L 478.84766 262.60938 L 478.84766 255.16406 z M 478.84766 273.05859 L 481.80078 274.62891 L 481.80078 282.07227 L 478.84766 280.50195 L 478.84766 273.05859 z M 478.84766 290.95117 L 481.80078 292.52148 L 481.80078 299.96484 L 478.84766 298.39453 L 478.84766 290.95117 z M 478.84766 308.84375 L 481.80078 310.41602 L 481.80078 317.85938 L 478.84766 316.28906 L 478.84766 308.84375 z M 478.84766 326.73828 L 481.80078 328.30859 L 481.80078 335.75195 L 478.84766 334.18164 L 478.84766 326.73828 z M 478.84766 344.63086 L 481.80078 346.20117 L 481.80078 353.64453 L 478.84766 352.07422 L 478.84766 344.63086 z M 478.84766 362.52344 L 481.80078 364.0957 L 481.80078 371.53906 L 478.84766 369.96875 L 478.84766 362.52344 z M 478.84766 380.41797 L 481.80078 381.98828 L 481.80078 389.43164 L 478.84766 387.86133 L 478.84766 380.41797 z M 478.84766 398.31055 L 481.80078 399.88086 L 481.80078 407.32422 L 478.84766 405.75391 L 478.84766 398.31055 z M 478.84766 416.20312 L 481.80078 417.77539 L 481.80078 425.21875 L 478.84766 423.64844 L 478.84766 416.20312 z",{
			fill: initialColors["centerLineColor"],
			id: 'centerLine5',
			visible: false,
			selectable:false,
			evented: false
		});

		centerLine6 = new fabric.Path("M 478.19727 19.699219 L 478.19727 23.953125 L 478.19727 28.207031 L 478.19727 32.460938 L 478.19727 36.714844 L 478.19727 40.96875 L 478.19727 45.222656 L 478.19727 49.476562 L 478.19727 53.730469 L 478.19727 57.984375 L 478.19727 62.238281 L 478.19727 66.492188 L 478.19727 70.746094 L 478.19727 75 L 478.19727 79.253906 L 478.19727 83.507812 L 478.19727 87.761719 L 478.19727 92.015625 L 478.19727 96.269531 L 478.19727 100.52344 L 478.19727 104.77734 L 478.19727 109.03125 L 478.19727 113.28516 L 478.19727 117.53906 L 478.19727 121.79297 L 478.19727 126.04688 L 478.19727 130.30078 L 478.19727 134.55469 L 478.19727 138.80859 L 478.19727 143.0625 L 478.19727 147.31641 L 478.19727 151.57031 L 478.19727 155.82422 L 478.19727 160.07812 L 478.19727 164.33203 L 478.19727 168.58594 L 478.19727 172.83984 L 478.19727 177.09375 L 478.19727 181.34766 L 478.19727 185.60156 L 478.19727 189.85547 L 478.19727 194.10938 L 478.19727 198.36328 L 478.19727 202.61719 L 478.19727 206.87109 L 478.19727 211.125 L 478.19727 215.37891 L 478.19727 219.63281 L 478.19727 223.88672 L 478.19727 228.14062 L 478.19727 232.39453 L 478.19727 236.64844 L 478.19727 240.90234 L 478.19727 245.15625 L 478.19727 249.41016 L 478.19727 253.66406 L 478.19727 257.91797 L 478.19727 262.17188 L 478.19727 266.42578 L 478.19727 270.67969 L 478.19727 274.93359 L 478.19727 279.1875 L 478.19727 283.44141 L 478.19727 287.69531 L 478.19727 291.94922 L 478.19727 296.20312 L 478.19727 300.45703 L 478.19727 304.71094 L 478.19727 308.96484 L 478.19727 313.21875 L 478.19727 317.47266 L 478.19727 321.72656 L 478.19727 325.98047 L 478.19727 330.23438 L 478.19727 334.48828 L 478.19727 338.74219 L 478.19727 342.99609 L 478.19727 347.25 L 478.19727 351.50391 L 478.19727 355.75781 L 478.19727 360.01172 L 478.19727 364.26562 L 478.19727 368.51953 L 478.19727 372.77344 L 478.19727 377.02734 L 478.19727 381.28125 L 478.19727 385.53516 L 478.19727 389.78906 L 478.19727 394.04297 L 478.19727 398.29688 L 478.19727 402.55078 L 478.19727 406.80469 L 478.19727 411.05859 L 478.19727 415.3125 L 478.19727 419.56641 L 478.19727 423.82031 L 478.19727 428.07422 L 478.57422 428.07422 L 480.32422 425.94727 L 478.57422 423.82031 L 480.32422 421.69336 L 478.57422 419.56641 L 480.32422 417.43945 L 478.57422 415.3125 L 480.32422 413.18555 L 478.57422 411.05859 L 480.32422 408.93164 L 478.57422 406.80469 L 480.32422 404.67773 L 478.57422 402.55078 L 480.32422 400.42383 L 478.57422 398.29688 L 480.32422 396.16992 L 478.57422 394.04297 L 480.32422 391.91602 L 478.57422 389.78906 L 480.32422 387.66211 L 478.57422 385.53516 L 480.32422 383.4082 L 478.57422 381.28125 L 480.32422 379.1543 L 478.57422 377.02734 L 480.32422 374.90039 L 478.57422 372.77344 L 480.32422 370.64648 L 478.57422 368.51953 L 480.32422 366.39258 L 478.57422 364.26562 L 480.32422 362.13867 L 478.57422 360.01172 L 480.32422 357.88477 L 478.57422 355.75781 L 480.32422 353.63086 L 478.57422 351.50391 L 480.32422 349.37695 L 478.57422 347.25 L 480.32422 345.12305 L 478.57422 342.99609 L 480.32422 340.86914 L 478.57422 338.74219 L 480.32422 336.61523 L 478.57422 334.48828 L 480.32422 332.36133 L 478.57422 330.23438 L 480.32422 328.10742 L 478.57422 325.98047 L 480.32422 323.85352 L 478.57422 321.72656 L 480.32422 319.59961 L 478.57422 317.47266 L 480.32422 315.3457 L 478.57422 313.21875 L 480.32422 311.0918 L 478.57422 308.96484 L 480.32422 306.83789 L 478.57422 304.71094 L 480.32422 302.58398 L 478.57422 300.45703 L 480.32422 298.33008 L 478.57422 296.20312 L 480.32422 294.07617 L 478.57422 291.94922 L 480.32422 289.82227 L 478.57422 287.69531 L 480.32422 285.56836 L 478.57422 283.44141 L 480.32422 281.31445 L 478.57422 279.1875 L 480.32422 277.06055 L 478.57422 274.93359 L 480.32422 272.80664 L 478.57422 270.67969 L 480.32422 268.55273 L 478.57422 266.42578 L 480.32422 264.29883 L 478.57422 262.17188 L 480.32422 260.04492 L 478.57422 257.91797 L 480.32422 255.79102 L 478.57422 253.66406 L 480.32422 251.53711 L 478.57422 249.41016 L 480.32422 247.2832 L 478.57422 245.15625 L 480.32422 243.0293 L 478.57422 240.90234 L 480.32422 238.77539 L 478.57422 236.64844 L 480.32422 234.52148 L 478.57422 232.39453 L 480.32422 230.26758 L 478.57422 228.14062 L 480.32422 226.01367 L 478.57422 223.88672 L 480.32422 221.75977 L 478.57422 219.63281 L 480.32422 217.50586 L 478.57422 215.37891 L 480.32422 213.25195 L 478.57422 211.125 L 480.32422 208.99805 L 478.57422 206.87109 L 480.32422 204.74414 L 478.57422 202.61719 L 480.32422 200.49023 L 478.57422 198.36328 L 480.32422 196.23633 L 478.57422 194.10938 L 480.32422 191.98242 L 478.57422 189.85547 L 480.32422 187.72852 L 478.57422 185.60156 L 480.32422 183.47461 L 478.57422 181.34766 L 480.32422 179.2207 L 478.57422 177.09375 L 480.32422 174.9668 L 478.57422 172.83984 L 480.32422 170.71289 L 478.57422 168.58594 L 480.32422 166.45898 L 478.57422 164.33203 L 480.32422 162.20508 L 478.57422 160.07812 L 480.32422 157.95117 L 478.57422 155.82422 L 480.32422 153.69727 L 478.57422 151.57031 L 480.32422 149.44336 L 478.57422 147.31641 L 480.32422 145.18945 L 478.57422 143.0625 L 480.32422 140.93555 L 478.57422 138.80859 L 480.32422 136.68164 L 478.57422 134.55469 L 480.32422 132.42773 L 478.57422 130.30078 L 480.32422 128.17383 L 478.57422 126.04688 L 480.32422 123.91992 L 478.57422 121.79297 L 480.32422 119.66602 L 478.57422 117.53906 L 480.32422 115.41211 L 478.57422 113.28516 L 480.32422 111.1582 L 478.57422 109.03125 L 480.32422 106.9043 L 478.57422 104.77734 L 480.32422 102.65039 L 478.57422 100.52344 L 480.32422 98.396484 L 478.57422 96.269531 L 480.32422 94.142578 L 478.57422 92.015625 L 480.32422 89.888672 L 478.57422 87.761719 L 480.32422 85.634766 L 478.57422 83.507812 L 480.32422 81.380859 L 478.57422 79.253906 L 480.32422 77.126953 L 478.57422 75 L 480.32422 72.873047 L 478.57422 70.746094 L 480.32422 68.619141 L 478.57422 66.492188 L 480.32422 64.365234 L 478.57422 62.238281 L 480.32422 60.111328 L 478.57422 57.984375 L 480.32422 55.857422 L 478.57422 53.730469 L 480.32422 51.603516 L 478.57422 49.476562 L 480.32422 47.349609 L 478.57422 45.222656 L 480.32422 43.095703 L 478.57422 40.96875 L 480.32422 38.841797 L 478.57422 36.714844 L 480.32422 34.587891 L 478.57422 32.460938 L 480.32422 30.333984 L 478.57422 28.207031 L 480.32422 26.080078 L 478.57422 23.953125 L 480.32422 21.826172 L 478.57422 19.699219 L 478.19727 19.699219 z M 480.32422 21.826172 L 482.07422 23.953125 L 480.32422 26.080078 L 482.07422 28.207031 L 480.32422 30.333984 L 482.07422 32.460938 L 480.32422 34.587891 L 482.07422 36.714844 L 480.32422 38.841797 L 482.07422 40.96875 L 480.32422 43.095703 L 482.07422 45.222656 L 480.32422 47.349609 L 482.07422 49.476562 L 480.32422 51.603516 L 482.07422 53.730469 L 480.32422 55.857422 L 482.07422 57.984375 L 480.32422 60.111328 L 482.07422 62.238281 L 480.32422 64.365234 L 482.07422 66.492188 L 480.32422 68.619141 L 482.07422 70.746094 L 480.32422 72.873047 L 482.07422 75 L 480.32422 77.126953 L 482.07422 79.253906 L 480.32422 81.380859 L 482.07422 83.507812 L 480.32422 85.634766 L 482.07422 87.761719 L 480.32422 89.888672 L 482.07422 92.015625 L 480.32422 94.142578 L 482.07422 96.269531 L 480.32422 98.396484 L 482.07422 100.52344 L 480.32422 102.65039 L 482.07422 104.77734 L 480.32422 106.9043 L 482.07422 109.03125 L 480.32422 111.1582 L 482.07422 113.28516 L 480.32422 115.41211 L 482.07422 117.53906 L 480.32422 119.66602 L 482.07422 121.79297 L 480.32422 123.91992 L 482.07422 126.04688 L 480.32422 128.17383 L 482.07422 130.30078 L 480.32422 132.42773 L 482.07422 134.55469 L 480.32422 136.68164 L 482.07422 138.80859 L 480.32422 140.93555 L 482.07422 143.0625 L 480.32422 145.18945 L 482.07422 147.31641 L 480.32422 149.44336 L 482.07422 151.57031 L 480.32422 153.69727 L 482.07422 155.82422 L 480.32422 157.95117 L 482.07422 160.07812 L 480.32422 162.20508 L 482.07422 164.33203 L 480.32422 166.45898 L 482.07422 168.58594 L 480.32422 170.71289 L 482.07422 172.83984 L 480.32422 174.9668 L 482.07422 177.09375 L 480.32422 179.2207 L 482.07422 181.34766 L 480.32422 183.47461 L 482.07422 185.60156 L 480.32422 187.72852 L 482.07422 189.85547 L 480.32422 191.98242 L 482.07422 194.10938 L 480.32422 196.23633 L 482.07422 198.36328 L 480.32422 200.49023 L 482.07422 202.61719 L 480.32422 204.74414 L 482.07422 206.87109 L 480.32422 208.99805 L 482.07422 211.125 L 480.32422 213.25195 L 482.07422 215.37891 L 480.32422 217.50586 L 482.07422 219.63281 L 480.32422 221.75977 L 482.07422 223.88672 L 480.32422 226.01367 L 482.07422 228.14062 L 480.32422 230.26758 L 482.07422 232.39453 L 480.32422 234.52148 L 482.07422 236.64844 L 480.32422 238.77539 L 482.07422 240.90234 L 480.32422 243.0293 L 482.07422 245.15625 L 480.32422 247.2832 L 482.07422 249.41016 L 480.32422 251.53711 L 482.07422 253.66406 L 480.32422 255.79102 L 482.07422 257.91797 L 480.32422 260.04492 L 482.07422 262.17188 L 480.32422 264.29883 L 482.07422 266.42578 L 480.32422 268.55273 L 482.07422 270.67969 L 480.32422 272.80664 L 482.07422 274.93359 L 480.32422 277.06055 L 482.07422 279.1875 L 480.32422 281.31445 L 482.07422 283.44141 L 480.32422 285.56836 L 482.07422 287.69531 L 480.32422 289.82227 L 482.07422 291.94922 L 480.32422 294.07617 L 482.07422 296.20312 L 480.32422 298.33008 L 482.07422 300.45703 L 480.32422 302.58398 L 482.07422 304.71094 L 480.32422 306.83789 L 482.07422 308.96484 L 480.32422 311.0918 L 482.07422 313.21875 L 480.32422 315.3457 L 482.07422 317.47266 L 480.32422 319.59961 L 482.07422 321.72656 L 480.32422 323.85352 L 482.07422 325.98047 L 480.32422 328.10742 L 482.07422 330.23438 L 480.32422 332.36133 L 482.07422 334.48828 L 480.32422 336.61523 L 482.07422 338.74219 L 480.32422 340.86914 L 482.07422 342.99609 L 480.32422 345.12305 L 482.07422 347.25 L 480.32422 349.37695 L 482.07422 351.50391 L 480.32422 353.63086 L 482.07422 355.75781 L 480.32422 357.88477 L 482.07422 360.01172 L 480.32422 362.13867 L 482.07422 364.26562 L 480.32422 366.39258 L 482.07422 368.51953 L 480.32422 370.64648 L 482.07422 372.77344 L 480.32422 374.90039 L 482.07422 377.02734 L 480.32422 379.1543 L 482.07422 381.28125 L 480.32422 383.4082 L 482.07422 385.53516 L 480.32422 387.66211 L 482.07422 389.78906 L 480.32422 391.91602 L 482.07422 394.04297 L 480.32422 396.16992 L 482.07422 398.29688 L 480.32422 400.42383 L 482.07422 402.55078 L 480.32422 404.67773 L 482.07422 406.80469 L 480.32422 408.93164 L 482.07422 411.05859 L 480.32422 413.18555 L 482.07422 415.3125 L 480.32422 417.43945 L 482.07422 419.56641 L 480.32422 421.69336 L 482.07422 423.82031 L 480.32422 425.94727 L 482.07422 428.07422 L 482.45117 428.07422 L 482.45117 423.82031 L 482.45117 419.56641 L 482.45117 415.3125 L 482.45117 411.05859 L 482.45117 406.80469 L 482.45117 402.55078 L 482.45117 398.29688 L 482.45117 394.04297 L 482.45117 389.78906 L 482.45117 385.53516 L 482.45117 381.28125 L 482.45117 377.02734 L 482.45117 372.77344 L 482.45117 368.51953 L 482.45117 364.26562 L 482.45117 360.01172 L 482.45117 355.75781 L 482.45117 351.50391 L 482.45117 347.25 L 482.45117 342.99609 L 482.45117 338.74219 L 482.45117 334.48828 L 482.45117 330.23438 L 482.45117 325.98047 L 482.45117 321.72656 L 482.45117 317.47266 L 482.45117 313.21875 L 482.45117 308.96484 L 482.45117 304.71094 L 482.45117 300.45703 L 482.45117 296.20312 L 482.45117 291.94922 L 482.45117 287.69531 L 482.45117 283.44141 L 482.45117 279.1875 L 482.45117 274.93359 L 482.45117 270.67969 L 482.45117 266.42578 L 482.45117 262.17188 L 482.45117 257.91797 L 482.45117 253.66406 L 482.45117 249.41016 L 482.45117 245.15625 L 482.45117 240.90234 L 482.45117 236.64844 L 482.45117 232.39453 L 482.45117 228.14062 L 482.45117 223.88672 L 482.45117 219.63281 L 482.45117 215.37891 L 482.45117 211.125 L 482.45117 206.87109 L 482.45117 202.61719 L 482.45117 198.36328 L 482.45117 194.10938 L 482.45117 189.85547 L 482.45117 185.60156 L 482.45117 181.34766 L 482.45117 177.09375 L 482.45117 172.83984 L 482.45117 168.58594 L 482.45117 164.33203 L 482.45117 160.07812 L 482.45117 155.82422 L 482.45117 151.57031 L 482.45117 147.31641 L 482.45117 143.0625 L 482.45117 138.80859 L 482.45117 134.55469 L 482.45117 130.30078 L 482.45117 126.04688 L 482.45117 121.79297 L 482.45117 117.53906 L 482.45117 113.28516 L 482.45117 109.03125 L 482.45117 104.77734 L 482.45117 100.52344 L 482.45117 96.269531 L 482.45117 92.015625 L 482.45117 87.761719 L 482.45117 83.507812 L 482.45117 79.253906 L 482.45117 75 L 482.45117 70.746094 L 482.45117 66.492188 L 482.45117 62.238281 L 482.45117 57.984375 L 482.45117 53.730469 L 482.45117 49.476562 L 482.45117 45.222656 L 482.45117 40.96875 L 482.45117 36.714844 L 482.45117 32.460938 L 482.45117 28.207031 L 482.45117 23.953125 L 482.45117 19.699219 L 482.07422 19.699219 L 480.32422 21.826172 z",{
			fill: initialColors["centerLineColor"],
			id: 'centerLine6',
			visible: false,
			selectable:false,
			evented: false
		});

		centerLine7 = new fabric.Path("M 478.19727 19.699219 L 478.19727 23.953125 L 478.19727 28.207031 L 478.19727 32.460938 L 478.19727 36.714844 L 478.19727 40.96875 L 478.19727 45.222656 L 478.19727 49.476562 L 478.19727 53.730469 L 478.19727 57.984375 L 478.19727 62.238281 L 478.19727 66.492188 L 478.19727 70.746094 L 478.19727 75 L 478.19727 79.253906 L 478.19727 83.507812 L 478.19727 87.761719 L 478.19727 92.015625 L 478.19727 96.269531 L 478.19727 100.52344 L 478.19727 104.77734 L 478.19727 109.03125 L 478.19727 113.28516 L 478.19727 117.53906 L 478.19727 121.79297 L 478.19727 126.04688 L 478.19727 130.30078 L 478.19727 134.55469 L 478.19727 138.80859 L 478.19727 143.0625 L 478.19727 147.31641 L 478.19727 151.57031 L 478.19727 155.82422 L 478.19727 160.07812 L 478.19727 164.33203 L 478.19727 168.58594 L 478.19727 172.83984 L 478.19727 177.09375 L 478.19727 181.34766 L 478.19727 185.60156 L 478.19727 189.85547 L 478.19727 194.10938 L 478.19727 198.36328 L 478.19727 202.61719 L 478.19727 206.87109 L 478.19727 211.125 L 478.19727 215.37891 L 478.19727 219.63281 L 478.19727 223.88672 L 478.19727 228.14062 L 478.19727 232.39453 L 478.19727 236.64844 L 478.19727 240.90234 L 478.19727 245.15625 L 478.19727 249.41016 L 478.19727 253.66406 L 478.19727 257.91797 L 478.19727 262.17188 L 478.19727 266.42578 L 478.19727 270.67969 L 478.19727 274.93359 L 478.19727 279.1875 L 478.19727 283.44141 L 478.19727 287.69531 L 478.19727 291.94922 L 478.19727 296.20312 L 478.19727 300.45703 L 478.19727 304.71094 L 478.19727 308.96484 L 478.19727 313.21875 L 478.19727 317.47266 L 478.19727 321.72656 L 478.19727 325.98047 L 478.19727 330.23438 L 478.19727 334.48828 L 478.19727 338.74219 L 478.19727 342.99609 L 478.19727 347.25 L 478.19727 351.50391 L 478.19727 355.75781 L 478.19727 360.01172 L 478.19727 364.26562 L 478.19727 368.51953 L 478.19727 372.77344 L 478.19727 377.02734 L 478.19727 381.28125 L 478.19727 385.53516 L 478.19727 389.78906 L 478.19727 394.04297 L 478.19727 398.29688 L 478.19727 402.55078 L 478.19727 406.80469 L 478.19727 411.05859 L 478.19727 415.3125 L 478.19727 419.56641 L 478.19727 423.82031 L 478.19727 428.07422 L 478.57422 428.07422 L 478.57422 423.82031 L 478.57422 419.56641 L 478.57422 415.3125 L 478.57422 411.05859 L 478.57422 406.80469 L 478.57422 402.55078 L 478.57422 398.29688 L 478.57422 394.04297 L 478.57422 389.78906 L 478.57422 385.53516 L 478.57422 381.28125 L 478.57422 377.02734 L 478.57422 372.77344 L 478.57422 368.51953 L 478.57422 364.26562 L 478.57422 360.01172 L 478.57422 355.75781 L 478.57422 351.50391 L 478.57422 347.25 L 478.57422 342.99609 L 478.57422 338.74219 L 478.57422 334.48828 L 478.57422 330.23438 L 478.57422 325.98047 L 478.57422 321.72656 L 478.57422 317.47266 L 478.57422 313.21875 L 478.57422 308.96484 L 478.57422 304.71094 L 478.57422 300.45703 L 478.57422 296.20312 L 478.57422 291.94922 L 478.57422 287.69531 L 478.57422 283.44141 L 478.57422 279.1875 L 478.57422 274.93359 L 478.57422 270.67969 L 478.57422 266.42578 L 478.57422 262.17188 L 478.57422 257.91797 L 478.57422 253.66406 L 478.57422 249.41016 L 478.57422 245.15625 L 478.57422 240.90234 L 478.57422 236.64844 L 478.57422 232.39453 L 478.57422 228.14062 L 478.57422 223.88672 L 478.57422 219.63281 L 478.57422 215.37891 L 478.57422 211.125 L 478.57422 206.87109 L 478.57422 202.61719 L 478.57422 198.36328 L 478.57422 194.10938 L 478.57422 189.85547 L 478.57422 185.60156 L 478.57422 181.34766 L 478.57422 177.09375 L 478.57422 172.83984 L 478.57422 168.58594 L 478.57422 164.33203 L 478.57422 160.07812 L 478.57422 155.82422 L 478.57422 151.57031 L 478.57422 147.31641 L 478.57422 143.0625 L 478.57422 138.80859 L 478.57422 134.55469 L 478.57422 130.30078 L 478.57422 126.04688 L 478.57422 121.79297 L 478.57422 117.53906 L 478.57422 113.28516 L 478.57422 109.03125 L 478.57422 104.77734 L 478.57422 100.52344 L 478.57422 96.269531 L 478.57422 92.015625 L 478.57422 87.761719 L 478.57422 83.507812 L 478.57422 79.253906 L 478.57422 75 L 478.57422 70.746094 L 478.57422 66.492188 L 478.57422 62.238281 L 478.57422 57.984375 L 478.57422 53.730469 L 478.57422 49.476562 L 478.57422 45.222656 L 478.57422 40.96875 L 478.57422 36.714844 L 478.57422 32.460938 L 478.57422 28.207031 L 478.57422 23.953125 L 478.57422 19.699219 L 478.19727 19.699219 z M 478.57422 19.699219 L 480.32422 21.826172 L 482.07422 19.699219 L 478.57422 19.699219 z M 482.07422 19.699219 L 482.07422 23.953125 L 482.07422 28.207031 L 482.07422 32.460938 L 482.07422 36.714844 L 482.07422 40.96875 L 482.07422 45.222656 L 482.07422 49.476562 L 482.07422 53.730469 L 482.07422 57.984375 L 482.07422 62.238281 L 482.07422 66.492188 L 482.07422 70.746094 L 482.07422 75 L 482.07422 79.253906 L 482.07422 83.507812 L 482.07422 87.761719 L 482.07422 92.015625 L 482.07422 96.269531 L 482.07422 100.52344 L 482.07422 104.77734 L 482.07422 109.03125 L 482.07422 113.28516 L 482.07422 117.53906 L 482.07422 121.79297 L 482.07422 126.04688 L 482.07422 130.30078 L 482.07422 134.55469 L 482.07422 138.80859 L 482.07422 143.0625 L 482.07422 147.31641 L 482.07422 151.57031 L 482.07422 155.82422 L 482.07422 160.07812 L 482.07422 164.33203 L 482.07422 168.58594 L 482.07422 172.83984 L 482.07422 177.09375 L 482.07422 181.34766 L 482.07422 185.60156 L 482.07422 189.85547 L 482.07422 194.10938 L 482.07422 198.36328 L 482.07422 202.61719 L 482.07422 206.87109 L 482.07422 211.125 L 482.07422 215.37891 L 482.07422 219.63281 L 482.07422 223.88672 L 482.07422 228.14062 L 482.07422 232.39453 L 482.07422 236.64844 L 482.07422 240.90234 L 482.07422 245.15625 L 482.07422 249.41016 L 482.07422 253.66406 L 482.07422 257.91797 L 482.07422 262.17188 L 482.07422 266.42578 L 482.07422 270.67969 L 482.07422 274.93359 L 482.07422 279.1875 L 482.07422 283.44141 L 482.07422 287.69531 L 482.07422 291.94922 L 482.07422 296.20312 L 482.07422 300.45703 L 482.07422 304.71094 L 482.07422 308.96484 L 482.07422 313.21875 L 482.07422 317.47266 L 482.07422 321.72656 L 482.07422 325.98047 L 482.07422 330.23438 L 482.07422 334.48828 L 482.07422 338.74219 L 482.07422 342.99609 L 482.07422 347.25 L 482.07422 351.50391 L 482.07422 355.75781 L 482.07422 360.01172 L 482.07422 364.26562 L 482.07422 368.51953 L 482.07422 372.77344 L 482.07422 377.02734 L 482.07422 381.28125 L 482.07422 385.53516 L 482.07422 389.78906 L 482.07422 394.04297 L 482.07422 398.29688 L 482.07422 402.55078 L 482.07422 406.80469 L 482.07422 411.05859 L 482.07422 415.3125 L 482.07422 419.56641 L 482.07422 423.82031 L 482.07422 428.07422 L 482.45117 428.07422 L 482.45117 423.82031 L 482.45117 419.56641 L 482.45117 415.3125 L 482.45117 411.05859 L 482.45117 406.80469 L 482.45117 402.55078 L 482.45117 398.29688 L 482.45117 394.04297 L 482.45117 389.78906 L 482.45117 385.53516 L 482.45117 381.28125 L 482.45117 377.02734 L 482.45117 372.77344 L 482.45117 368.51953 L 482.45117 364.26562 L 482.45117 360.01172 L 482.45117 355.75781 L 482.45117 351.50391 L 482.45117 347.25 L 482.45117 342.99609 L 482.45117 338.74219 L 482.45117 334.48828 L 482.45117 330.23438 L 482.45117 325.98047 L 482.45117 321.72656 L 482.45117 317.47266 L 482.45117 313.21875 L 482.45117 308.96484 L 482.45117 304.71094 L 482.45117 300.45703 L 482.45117 296.20312 L 482.45117 291.94922 L 482.45117 287.69531 L 482.45117 283.44141 L 482.45117 279.1875 L 482.45117 274.93359 L 482.45117 270.67969 L 482.45117 266.42578 L 482.45117 262.17188 L 482.45117 257.91797 L 482.45117 253.66406 L 482.45117 249.41016 L 482.45117 245.15625 L 482.45117 240.90234 L 482.45117 236.64844 L 482.45117 232.39453 L 482.45117 228.14062 L 482.45117 223.88672 L 482.45117 219.63281 L 482.45117 215.37891 L 482.45117 211.125 L 482.45117 206.87109 L 482.45117 202.61719 L 482.45117 198.36328 L 482.45117 194.10938 L 482.45117 189.85547 L 482.45117 185.60156 L 482.45117 181.34766 L 482.45117 177.09375 L 482.45117 172.83984 L 482.45117 168.58594 L 482.45117 164.33203 L 482.45117 160.07812 L 482.45117 155.82422 L 482.45117 151.57031 L 482.45117 147.31641 L 482.45117 143.0625 L 482.45117 138.80859 L 482.45117 134.55469 L 482.45117 130.30078 L 482.45117 126.04688 L 482.45117 121.79297 L 482.45117 117.53906 L 482.45117 113.28516 L 482.45117 109.03125 L 482.45117 104.77734 L 482.45117 100.52344 L 482.45117 96.269531 L 482.45117 92.015625 L 482.45117 87.761719 L 482.45117 83.507812 L 482.45117 79.253906 L 482.45117 75 L 482.45117 70.746094 L 482.45117 66.492188 L 482.45117 62.238281 L 482.45117 57.984375 L 482.45117 53.730469 L 482.45117 49.476562 L 482.45117 45.222656 L 482.45117 40.96875 L 482.45117 36.714844 L 482.45117 32.460938 L 482.45117 28.207031 L 482.45117 23.953125 L 482.45117 19.699219 L 482.07422 19.699219 z M 482.07422 428.07422 L 480.32422 425.94727 L 478.57422 428.07422 L 482.07422 428.07422 z M 480.32422 425.94727 L 482.07422 423.82031 L 480.32422 421.69336 L 478.57422 423.82031 L 480.32422 425.94727 z M 480.32422 421.69336 L 482.07422 419.56641 L 480.32422 417.43945 L 478.57422 419.56641 L 480.32422 421.69336 z M 480.32422 417.43945 L 482.07422 415.3125 L 480.32422 413.18555 L 478.57422 415.3125 L 480.32422 417.43945 z M 480.32422 413.18555 L 482.07422 411.05859 L 480.32422 408.93164 L 478.57422 411.05859 L 480.32422 413.18555 z M 480.32422 408.93164 L 482.07422 406.80469 L 480.32422 404.67773 L 478.57422 406.80469 L 480.32422 408.93164 z M 480.32422 404.67773 L 482.07422 402.55078 L 480.32422 400.42383 L 478.57422 402.55078 L 480.32422 404.67773 z M 480.32422 400.42383 L 482.07422 398.29688 L 480.32422 396.16992 L 478.57422 398.29688 L 480.32422 400.42383 z M 480.32422 396.16992 L 482.07422 394.04297 L 480.32422 391.91602 L 478.57422 394.04297 L 480.32422 396.16992 z M 480.32422 391.91602 L 482.07422 389.78906 L 480.32422 387.66211 L 478.57422 389.78906 L 480.32422 391.91602 z M 480.32422 387.66211 L 482.07422 385.53516 L 480.32422 383.4082 L 478.57422 385.53516 L 480.32422 387.66211 z M 480.32422 383.4082 L 482.07422 381.28125 L 480.32422 379.1543 L 478.57422 381.28125 L 480.32422 383.4082 z M 480.32422 379.1543 L 482.07422 377.02734 L 480.32422 374.90039 L 478.57422 377.02734 L 480.32422 379.1543 z M 480.32422 374.90039 L 482.07422 372.77344 L 480.32422 370.64648 L 478.57422 372.77344 L 480.32422 374.90039 z M 480.32422 370.64648 L 482.07422 368.51953 L 480.32422 366.39258 L 478.57422 368.51953 L 480.32422 370.64648 z M 480.32422 366.39258 L 482.07422 364.26562 L 480.32422 362.13867 L 478.57422 364.26562 L 480.32422 366.39258 z M 480.32422 362.13867 L 482.07422 360.01172 L 480.32422 357.88477 L 478.57422 360.01172 L 480.32422 362.13867 z M 480.32422 357.88477 L 482.07422 355.75781 L 480.32422 353.63086 L 478.57422 355.75781 L 480.32422 357.88477 z M 480.32422 353.63086 L 482.07422 351.50391 L 480.32422 349.37695 L 478.57422 351.50391 L 480.32422 353.63086 z M 480.32422 349.37695 L 482.07422 347.25 L 480.32422 345.12305 L 478.57422 347.25 L 480.32422 349.37695 z M 480.32422 345.12305 L 482.07422 342.99609 L 480.32422 340.86914 L 478.57422 342.99609 L 480.32422 345.12305 z M 480.32422 340.86914 L 482.07422 338.74219 L 480.32422 336.61523 L 478.57422 338.74219 L 480.32422 340.86914 z M 480.32422 336.61523 L 482.07422 334.48828 L 480.32422 332.36133 L 478.57422 334.48828 L 480.32422 336.61523 z M 480.32422 332.36133 L 482.07422 330.23438 L 480.32422 328.10742 L 478.57422 330.23438 L 480.32422 332.36133 z M 480.32422 328.10742 L 482.07422 325.98047 L 480.32422 323.85352 L 478.57422 325.98047 L 480.32422 328.10742 z M 480.32422 323.85352 L 482.07422 321.72656 L 480.32422 319.59961 L 478.57422 321.72656 L 480.32422 323.85352 z M 480.32422 319.59961 L 482.07422 317.47266 L 480.32422 315.3457 L 478.57422 317.47266 L 480.32422 319.59961 z M 480.32422 315.3457 L 482.07422 313.21875 L 480.32422 311.0918 L 478.57422 313.21875 L 480.32422 315.3457 z M 480.32422 311.0918 L 482.07422 308.96484 L 480.32422 306.83789 L 478.57422 308.96484 L 480.32422 311.0918 z M 480.32422 306.83789 L 482.07422 304.71094 L 480.32422 302.58398 L 478.57422 304.71094 L 480.32422 306.83789 z M 480.32422 302.58398 L 482.07422 300.45703 L 480.32422 298.33008 L 478.57422 300.45703 L 480.32422 302.58398 z M 480.32422 298.33008 L 482.07422 296.20312 L 480.32422 294.07617 L 478.57422 296.20312 L 480.32422 298.33008 z M 480.32422 294.07617 L 482.07422 291.94922 L 480.32422 289.82227 L 478.57422 291.94922 L 480.32422 294.07617 z M 480.32422 289.82227 L 482.07422 287.69531 L 480.32422 285.56836 L 478.57422 287.69531 L 480.32422 289.82227 z M 480.32422 285.56836 L 482.07422 283.44141 L 480.32422 281.31445 L 478.57422 283.44141 L 480.32422 285.56836 z M 480.32422 281.31445 L 482.07422 279.1875 L 480.32422 277.06055 L 478.57422 279.1875 L 480.32422 281.31445 z M 480.32422 277.06055 L 482.07422 274.93359 L 480.32422 272.80664 L 478.57422 274.93359 L 480.32422 277.06055 z M 480.32422 272.80664 L 482.07422 270.67969 L 480.32422 268.55273 L 478.57422 270.67969 L 480.32422 272.80664 z M 480.32422 268.55273 L 482.07422 266.42578 L 480.32422 264.29883 L 478.57422 266.42578 L 480.32422 268.55273 z M 480.32422 264.29883 L 482.07422 262.17188 L 480.32422 260.04492 L 478.57422 262.17188 L 480.32422 264.29883 z M 480.32422 260.04492 L 482.07422 257.91797 L 480.32422 255.79102 L 478.57422 257.91797 L 480.32422 260.04492 z M 480.32422 255.79102 L 482.07422 253.66406 L 480.32422 251.53711 L 478.57422 253.66406 L 480.32422 255.79102 z M 480.32422 251.53711 L 482.07422 249.41016 L 480.32422 247.2832 L 478.57422 249.41016 L 480.32422 251.53711 z M 480.32422 247.2832 L 482.07422 245.15625 L 480.32422 243.0293 L 478.57422 245.15625 L 480.32422 247.2832 z M 480.32422 243.0293 L 482.07422 240.90234 L 480.32422 238.77539 L 478.57422 240.90234 L 480.32422 243.0293 z M 480.32422 238.77539 L 482.07422 236.64844 L 480.32422 234.52148 L 478.57422 236.64844 L 480.32422 238.77539 z M 480.32422 234.52148 L 482.07422 232.39453 L 480.32422 230.26758 L 478.57422 232.39453 L 480.32422 234.52148 z M 480.32422 230.26758 L 482.07422 228.14062 L 480.32422 226.01367 L 478.57422 228.14062 L 480.32422 230.26758 z M 480.32422 226.01367 L 482.07422 223.88672 L 480.32422 221.75977 L 478.57422 223.88672 L 480.32422 226.01367 z M 480.32422 221.75977 L 482.07422 219.63281 L 480.32422 217.50586 L 478.57422 219.63281 L 480.32422 221.75977 z M 480.32422 217.50586 L 482.07422 215.37891 L 480.32422 213.25195 L 478.57422 215.37891 L 480.32422 217.50586 z M 480.32422 213.25195 L 482.07422 211.125 L 480.32422 208.99805 L 478.57422 211.125 L 480.32422 213.25195 z M 480.32422 208.99805 L 482.07422 206.87109 L 480.32422 204.74414 L 478.57422 206.87109 L 480.32422 208.99805 z M 480.32422 204.74414 L 482.07422 202.61719 L 480.32422 200.49023 L 478.57422 202.61719 L 480.32422 204.74414 z M 480.32422 200.49023 L 482.07422 198.36328 L 480.32422 196.23633 L 478.57422 198.36328 L 480.32422 200.49023 z M 480.32422 196.23633 L 482.07422 194.10938 L 480.32422 191.98242 L 478.57422 194.10938 L 480.32422 196.23633 z M 480.32422 191.98242 L 482.07422 189.85547 L 480.32422 187.72852 L 478.57422 189.85547 L 480.32422 191.98242 z M 480.32422 187.72852 L 482.07422 185.60156 L 480.32422 183.47461 L 478.57422 185.60156 L 480.32422 187.72852 z M 480.32422 183.47461 L 482.07422 181.34766 L 480.32422 179.2207 L 478.57422 181.34766 L 480.32422 183.47461 z M 480.32422 179.2207 L 482.07422 177.09375 L 480.32422 174.9668 L 478.57422 177.09375 L 480.32422 179.2207 z M 480.32422 174.9668 L 482.07422 172.83984 L 480.32422 170.71289 L 478.57422 172.83984 L 480.32422 174.9668 z M 480.32422 170.71289 L 482.07422 168.58594 L 480.32422 166.45898 L 478.57422 168.58594 L 480.32422 170.71289 z M 480.32422 166.45898 L 482.07422 164.33203 L 480.32422 162.20508 L 478.57422 164.33203 L 480.32422 166.45898 z M 480.32422 162.20508 L 482.07422 160.07812 L 480.32422 157.95117 L 478.57422 160.07812 L 480.32422 162.20508 z M 480.32422 157.95117 L 482.07422 155.82422 L 480.32422 153.69727 L 478.57422 155.82422 L 480.32422 157.95117 z M 480.32422 153.69727 L 482.07422 151.57031 L 480.32422 149.44336 L 478.57422 151.57031 L 480.32422 153.69727 z M 480.32422 149.44336 L 482.07422 147.31641 L 480.32422 145.18945 L 478.57422 147.31641 L 480.32422 149.44336 z M 480.32422 145.18945 L 482.07422 143.0625 L 480.32422 140.93555 L 478.57422 143.0625 L 480.32422 145.18945 z M 480.32422 140.93555 L 482.07422 138.80859 L 480.32422 136.68164 L 478.57422 138.80859 L 480.32422 140.93555 z M 480.32422 136.68164 L 482.07422 134.55469 L 480.32422 132.42773 L 478.57422 134.55469 L 480.32422 136.68164 z M 480.32422 132.42773 L 482.07422 130.30078 L 480.32422 128.17383 L 478.57422 130.30078 L 480.32422 132.42773 z M 480.32422 128.17383 L 482.07422 126.04688 L 480.32422 123.91992 L 478.57422 126.04688 L 480.32422 128.17383 z M 480.32422 123.91992 L 482.07422 121.79297 L 480.32422 119.66602 L 478.57422 121.79297 L 480.32422 123.91992 z M 480.32422 119.66602 L 482.07422 117.53906 L 480.32422 115.41211 L 478.57422 117.53906 L 480.32422 119.66602 z M 480.32422 115.41211 L 482.07422 113.28516 L 480.32422 111.1582 L 478.57422 113.28516 L 480.32422 115.41211 z M 480.32422 111.1582 L 482.07422 109.03125 L 480.32422 106.9043 L 478.57422 109.03125 L 480.32422 111.1582 z M 480.32422 106.9043 L 482.07422 104.77734 L 480.32422 102.65039 L 478.57422 104.77734 L 480.32422 106.9043 z M 480.32422 102.65039 L 482.07422 100.52344 L 480.32422 98.396484 L 478.57422 100.52344 L 480.32422 102.65039 z M 480.32422 98.396484 L 482.07422 96.269531 L 480.32422 94.142578 L 478.57422 96.269531 L 480.32422 98.396484 z M 480.32422 94.142578 L 482.07422 92.015625 L 480.32422 89.888672 L 478.57422 92.015625 L 480.32422 94.142578 z M 480.32422 89.888672 L 482.07422 87.761719 L 480.32422 85.634766 L 478.57422 87.761719 L 480.32422 89.888672 z M 480.32422 85.634766 L 482.07422 83.507812 L 480.32422 81.380859 L 478.57422 83.507812 L 480.32422 85.634766 z M 480.32422 81.380859 L 482.07422 79.253906 L 480.32422 77.126953 L 478.57422 79.253906 L 480.32422 81.380859 z M 480.32422 77.126953 L 482.07422 75 L 480.32422 72.873047 L 478.57422 75 L 480.32422 77.126953 z M 480.32422 72.873047 L 482.07422 70.746094 L 480.32422 68.619141 L 478.57422 70.746094 L 480.32422 72.873047 z M 480.32422 68.619141 L 482.07422 66.492188 L 480.32422 64.365234 L 478.57422 66.492188 L 480.32422 68.619141 z M 480.32422 64.365234 L 482.07422 62.238281 L 480.32422 60.111328 L 478.57422 62.238281 L 480.32422 64.365234 z M 480.32422 60.111328 L 482.07422 57.984375 L 480.32422 55.857422 L 478.57422 57.984375 L 480.32422 60.111328 z M 480.32422 55.857422 L 482.07422 53.730469 L 480.32422 51.603516 L 478.57422 53.730469 L 480.32422 55.857422 z M 480.32422 51.603516 L 482.07422 49.476562 L 480.32422 47.349609 L 478.57422 49.476562 L 480.32422 51.603516 z M 480.32422 47.349609 L 482.07422 45.222656 L 480.32422 43.095703 L 478.57422 45.222656 L 480.32422 47.349609 z M 480.32422 43.095703 L 482.07422 40.96875 L 480.32422 38.841797 L 478.57422 40.96875 L 480.32422 43.095703 z M 480.32422 38.841797 L 482.07422 36.714844 L 480.32422 34.587891 L 478.57422 36.714844 L 480.32422 38.841797 z M 480.32422 34.587891 L 482.07422 32.460938 L 480.32422 30.333984 L 478.57422 32.460938 L 480.32422 34.587891 z M 480.32422 30.333984 L 482.07422 28.207031 L 480.32422 26.080078 L 478.57422 28.207031 L 480.32422 30.333984 z M 480.32422 26.080078 L 482.07422 23.953125 L 480.32422 21.826172 L 478.57422 23.953125 L 480.32422 26.080078 z",{
			fill: initialColors["centerLineColor"],
			id: 'centerLine7',
			visible: false,
			selectable:false,
			evented: false
		});

        centerLineStroke = new fabric.Path("M 476.19727 30.496094 L 476.19727 416.50391 L 480.19727 416.50391 L 480.45117 416.50391 L 484.45117 416.50391 L 484.45117 30.496094 L 480.45117 30.496094 L 480.19727 30.496094 L 476.19727 30.496094 z",{
			fill: initialColors["rinkColor"],
			id: 'strokeCenterLine',
			visible: true,
			selectable:false,
			evented: false
		});

        centerCircle = new fabric.Path("M 480.32227 156.79492 C 443.28967 156.79522 413.23664 186.85021 413.23633 223.88281 C 413.23551 260.91621 443.28887 290.96845 480.32227 290.96875 C 517.35566 290.96845 547.41098 260.91621 547.41016 223.88281 C 547.40985 186.85021 517.35486 156.79522 480.32227 156.79492 z M 480.32617 158.29492 A 65.586461 65.586461 0 0 1 545.91211 223.88086 A 65.586461 65.586461 0 0 1 480.32617 289.46875 A 65.586461 65.586461 0 0 1 414.74023 223.88086 A 65.586461 65.586461 0 0 1 480.32617 158.29492 z",{
			fill: initialColors["blueLineColor"],
			id: 'centerCircle',
			visible: true,
			selectable:false,
			evented: false
		});

        blueLines = new fabric.Path("M 586.19727 25.845703 L 586.19727 421.1543 L 590.45117 421.1543 L 590.45117 25.845703 L 586.19727 25.845703 z M 368.87109 25.935547 L 368.87109 421.24414 L 373.125 421.24414 L 373.125 25.935547 L 368.87109 25.935547 z",{
			fill: initialColors["blueLineColor"],
			id: 'blueLines',
			visible: true,
			selectable:false,
			evented: false
		});

        goalLines = new fabric.Path("M 82.382812 24.521484 L 82.382812 39.638672 L 90.871094 39.638672 L 90.871094 407.91602 L 82.382812 407.91602 L 82.382812 423.0332 L 93.875 423.0332 L 93.875 416.5918 L 93.875 407.91602 L 93.875 30.583984 L 93.875 24.521484 L 82.382812 24.521484 z M 865.42383 24.658203 L 865.42383 39.775391 L 865.84375 39.775391 L 865.84375 407.88086 L 865.01367 407.88086 L 865.01367 422.99805 L 876.50391 422.99805 L 876.50391 407.88086 L 868.84766 407.88086 L 868.84766 39.775391 L 876.91406 39.775391 L 876.91406 24.658203 L 865.42383 24.658203 z",{
			fill: initialColors["centerLineColor"],
			id: 'goalLines',
			visible: true,
			selectable:false,
			evented: false
		});

        trapezoidFill = new fabric.Path("M 917.82422 160.58008 L 867.32812 185.53906 C 867.32812 185.53906 868.10202 262.53873 867.32812 263.11914 C 866.55425 263.69955 917.43661 286.72405 918.98438 287.69141 C 920.53214 288.65876 917.82422 160.58008 917.82422 160.58008 z M 42.951172 161.74219 L 42.369141 286.72266 L 92.478516 263.3125 L 92.865234 185.34375 L 42.951172 161.74219 z",{
			fill: 'rgba(0,0,0,0)',
			id: 'trapezoidFill',
			visible: true,
			selectable:false,
			evented: false
        });

        trapezoidStroke = new fabric.Path("M 44.861328 160.66602 L 44.861328 163.56836 L 91.875 186.20508 L 91.875 183.30273 L 44.861328 160.66602 z M 914.85742 160.66602 L 867.84375 183.30273 L 867.84375 186.20508 L 914.85742 163.56836 L 914.85742 160.66602 z M 91.875 261.79492 L 44.861328 284.43164 L 44.861328 287.33398 L 91.875 264.69727 L 91.875 261.79492 z M 867.84375 261.79492 L 867.84375 264.69727 L 914.85742 287.33398 L 914.85742 284.43164 L 867.84375 261.79492 z",{
			fill: initialColors["centerLineColor"],
			id: 'trapezoidStroke',
			visible: true,
			selectable:false,
			evented: false
        });

        nzFaceOffSpots = new fabric.Path("M 392.48438 122.79297 A 5.0880853 5.0880853 0 0 0 387.39648 127.88086 A 5.0880853 5.0880853 0 0 0 392.48438 132.96875 A 5.0880853 5.0880853 0 0 0 397.57227 127.88086 A 5.0880853 5.0880853 0 0 0 392.48438 122.79297 z M 566.48438 122.79297 A 5.0880853 5.0880853 0 0 0 561.39453 127.88086 A 5.0880853 5.0880853 0 0 0 566.48438 132.96875 A 5.0880853 5.0880853 0 0 0 571.57227 127.88086 A 5.0880853 5.0880853 0 0 0 566.48438 122.79297 z M 392.48438 314.79297 A 5.0880853 5.0880853 0 0 0 387.39648 319.88086 A 5.0880853 5.0880853 0 0 0 392.48438 324.9707 A 5.0880853 5.0880853 0 0 0 397.57227 319.88086 A 5.0880853 5.0880853 0 0 0 392.48438 314.79297 z M 566.48438 314.79297 A 5.0880853 5.0880853 0 0 0 561.39453 319.88086 A 5.0880853 5.0880853 0 0 0 566.48438 324.9707 A 5.0880853 5.0880853 0 0 0 571.57227 319.88086 A 5.0880853 5.0880853 0 0 0 566.48438 314.79297 z",{
			fill: initialColors["centerLineColor"],
			id: 'nzFaceOffSpots',
			visible: true,
			selectable:false,
			evented: false
        });

        ezFaceOffSpots = new fabric.Path("M 180.48438 122.79297 A 5.0880853 5.0880853 0 0 0 175.39648 127.88086 A 5.0880853 5.0880853 0 0 0 180.48438 132.96875 A 5.0880853 5.0880853 0 0 0 185.57227 127.88086 A 5.0880853 5.0880853 0 0 0 180.48438 122.79297 z M 778.48438 122.79297 A 5.0880853 5.0880853 0 0 0 773.39648 127.88086 A 5.0880853 5.0880853 0 0 0 778.48438 132.96875 A 5.0880853 5.0880853 0 0 0 783.57227 127.88086 A 5.0880853 5.0880853 0 0 0 778.48438 122.79297 z M 180.48438 314.79297 A 5.0880853 5.0880853 0 0 0 175.39648 319.88086 A 5.0880853 5.0880853 0 0 0 180.48438 324.9707 A 5.0880853 5.0880853 0 0 0 185.57227 319.88086 A 5.0880853 5.0880853 0 0 0 180.48438 314.79297 z M 778.48438 314.79297 A 5.0880853 5.0880853 0 0 0 773.39648 319.88086 A 5.0880853 5.0880853 0 0 0 778.48438 324.9707 A 5.0880853 5.0880853 0 0 0 783.57227 319.88086 A 5.0880853 5.0880853 0 0 0 778.48438 314.79297 z",{
			fill: initialColors["centerLineColor"],
			id: 'ezFaceOffSpots',
			visible: true,
			selectable:false,
			evented: false
        });

        ezFaceOffLines = new fabric.Path("M 169.17188 110.79102 L 169.17188 121.15625 L 154.64453 121.15625 L 154.64453 124.30664 L 172.32227 124.30664 L 172.32227 121.15625 L 172.32227 110.79102 L 169.17188 110.79102 z M 188.64453 110.79102 L 188.64453 121.15625 L 188.64453 124.30664 L 191.79492 124.30664 L 206.32227 124.30664 L 206.32227 121.15625 L 191.79492 121.15625 L 191.79492 110.79102 L 188.64453 110.79102 z M 767.17383 110.79102 L 767.17383 121.15625 L 752.64648 121.15625 L 752.64648 124.30664 L 767.17383 124.30664 L 770.32227 124.30664 L 770.32227 121.15625 L 770.32227 110.79102 L 767.17383 110.79102 z M 786.64648 110.79102 L 786.64648 121.15625 L 786.64648 124.30664 L 804.32227 124.30664 L 804.32227 121.15625 L 789.79492 121.15625 L 789.79492 110.79102 L 786.64648 110.79102 z M 154.64453 131.45703 L 154.64453 134.60742 L 169.17188 134.60742 L 169.17188 144.97266 L 172.32227 144.97266 L 172.32227 131.45703 L 154.64453 131.45703 z M 188.64453 131.45703 L 188.64453 144.97266 L 191.79492 144.97266 L 191.79492 134.60742 L 206.32227 134.60742 L 206.32227 131.45703 L 191.79492 131.45703 L 188.64453 131.45703 z M 752.64648 131.45703 L 752.64648 134.60742 L 767.17383 134.60742 L 767.17383 144.97266 L 770.32227 144.97266 L 770.32227 131.45703 L 752.64648 131.45703 z M 786.64648 131.45703 L 786.64648 144.97266 L 789.79492 144.97266 L 789.79492 134.60742 L 804.32227 134.60742 L 804.32227 131.45703 L 789.79492 131.45703 L 786.64648 131.45703 z M 169.17188 302.79102 L 169.17188 313.15625 L 154.64453 313.15625 L 154.64453 316.30664 L 169.17188 316.30664 L 172.32227 316.30664 L 172.32227 313.15625 L 172.32227 302.79102 L 169.17188 302.79102 z M 188.64453 302.79102 L 188.64453 313.15625 L 188.64453 316.30664 L 206.32227 316.30664 L 206.32227 313.15625 L 191.79492 313.15625 L 191.79492 302.79102 L 188.64453 302.79102 z M 767.17383 302.79102 L 767.17383 313.15625 L 752.64648 313.15625 L 752.64648 316.30664 L 767.17383 316.30664 L 770.32227 316.30664 L 770.32227 313.15625 L 770.32227 302.79102 L 767.17383 302.79102 z M 786.64648 302.79102 L 786.64648 316.30664 L 789.79492 316.30664 L 804.32227 316.30664 L 804.32227 313.15625 L 789.79492 313.15625 L 789.79492 302.79102 L 786.64648 302.79102 z M 154.64453 323.45703 L 154.64453 326.60742 L 169.17188 326.60742 L 169.17188 336.97266 L 172.32227 336.97266 L 172.32227 323.45703 L 154.64453 323.45703 z M 188.64453 323.45703 L 188.64453 326.60742 L 188.64453 336.97266 L 191.79492 336.97266 L 191.79492 326.60742 L 206.32227 326.60742 L 206.32227 323.45703 L 188.64453 323.45703 z M 752.64648 323.45703 L 752.64648 326.60742 L 767.17383 326.60742 L 767.17383 336.97266 L 770.32227 336.97266 L 770.32227 323.45703 L 752.64648 323.45703 z M 786.64648 323.45703 L 786.64648 336.97266 L 789.79492 336.97266 L 789.79492 326.60742 L 804.32227 326.60742 L 804.32227 323.45703 L 789.79492 323.45703 L 786.64648 323.45703 z",{
			fill: initialColors["centerLineColor"],
			id: 'ezFaceOffLines',
			visible: true,
			selectable:false,
			evented: false
        });

        ezFaceOffCircles = new fabric.Path("M 169.17188 53.457031 L 169.17188 61.769531 C 137.54393 67.157183 113.41602 94.732847 113.41602 127.88086 C 113.41602 161.02886 137.54393 188.60638 169.17188 193.99414 L 169.17188 202.30664 L 172.32227 202.30664 L 172.32227 194.45508 C 174.99869 194.78081 177.72094 194.95117 180.48438 194.95117 C 183.24648 194.95117 185.96937 194.7805 188.64453 194.45508 L 188.64453 202.30664 L 191.79492 202.30664 L 191.79492 193.99414 C 223.42399 188.60768 247.55273 161.02997 247.55273 127.88086 C 247.55273 94.731741 223.42399 67.155882 191.79492 61.769531 L 191.79492 53.457031 L 188.64453 53.457031 L 188.64453 61.308594 C 185.96936 60.983173 183.2465 60.8125 180.48438 60.8125 C 177.72092 60.8125 174.9987 60.982866 172.32227 61.308594 L 172.32227 53.457031 L 169.17188 53.457031 z M 767.17383 53.457031 L 767.17383 61.769531 C 735.54494 67.156402 711.41602 94.732184 711.41602 127.88086 C 711.41602 161.02953 735.54494 188.60716 767.17383 193.99414 L 767.17383 202.30664 L 770.32227 202.30664 L 770.32227 194.45508 C 772.99869 194.78081 775.72289 194.95117 778.48633 194.95117 C 781.24911 194.95117 783.97071 194.78066 786.64648 194.45508 L 786.64648 202.30664 L 789.79492 202.30664 L 789.79492 193.99414 C 821.42431 188.60794 845.55273 161.03019 845.55273 127.88086 C 845.55273 94.73152 821.42431 67.155622 789.79492 61.769531 L 789.79492 53.457031 L 786.64648 53.457031 L 786.64648 61.308594 C 783.97069 60.98302 781.24912 60.8125 778.48633 60.8125 C 775.72287 60.8125 772.9987 60.982866 770.32227 61.308594 L 770.32227 53.457031 L 767.17383 53.457031 z M 180.48438 63.962891 A 63.91907 63.91907 0 0 1 244.4043 127.88086 A 63.91907 63.91907 0 0 1 180.48438 191.80078 A 63.91907 63.91907 0 0 1 116.56445 127.88086 A 63.91907 63.91907 0 0 1 180.48438 63.962891 z M 778.48438 63.962891 A 63.91907 63.91907 0 0 1 842.4043 127.88086 A 63.91907 63.91907 0 0 1 778.48438 191.80078 A 63.91907 63.91907 0 0 1 714.56641 127.88086 A 63.91907 63.91907 0 0 1 778.48438 63.962891 z M 169.17188 245.45703 L 169.17188 253.76953 C 137.54393 259.15718 113.41602 286.73285 113.41602 319.88086 C 113.41602 353.02886 137.54393 380.60638 169.17188 385.99414 L 169.17188 394.30664 L 172.32227 394.30664 L 172.32227 386.45508 C 174.99869 386.78081 177.72094 386.95117 180.48438 386.95117 C 183.24648 386.95117 185.96937 386.7805 188.64453 386.45508 L 188.64453 394.30664 L 191.79492 394.30664 L 191.79492 385.99414 C 223.42399 380.60768 247.55273 353.02997 247.55273 319.88086 C 247.55273 286.73174 223.42399 259.15588 191.79492 253.76953 L 191.79492 245.45703 L 188.64453 245.45703 L 188.64453 253.30859 C 185.96936 252.98317 183.2465 252.8125 180.48438 252.8125 C 177.72092 252.8125 174.9987 252.98287 172.32227 253.30859 L 172.32227 245.45703 L 169.17188 245.45703 z M 767.17383 245.45703 L 767.17383 253.76953 C 735.54494 259.1564 711.41602 286.73219 711.41602 319.88086 C 711.41602 353.02953 735.54494 380.60716 767.17383 385.99414 L 767.17383 394.30664 L 770.32227 394.30664 L 770.32227 386.45508 C 772.99869 386.78081 775.72289 386.95117 778.48633 386.95117 C 781.24911 386.95117 783.97071 386.78066 786.64648 386.45508 L 786.64648 394.30664 L 789.79492 394.30664 L 789.79492 385.99414 C 821.42431 380.60794 845.55273 353.03019 845.55273 319.88086 C 845.55273 286.73152 821.42431 259.15562 789.79492 253.76953 L 789.79492 245.45703 L 786.64648 245.45703 L 786.64648 253.30859 C 783.97069 252.98302 781.24912 252.8125 778.48633 252.8125 C 775.72287 252.8125 772.9987 252.98287 770.32227 253.30859 L 770.32227 245.45703 L 767.17383 245.45703 z M 180.48438 255.96289 A 63.91907 63.91907 0 0 1 244.4043 319.88086 A 63.91907 63.91907 0 0 1 180.48438 383.80078 A 63.91907 63.91907 0 0 1 116.56445 319.88086 A 63.91907 63.91907 0 0 1 180.48438 255.96289 z M 778.48438 255.96289 A 63.91907 63.91907 0 0 1 842.4043 319.88086 A 63.91907 63.91907 0 0 1 778.48438 383.80078 A 63.91907 63.91907 0 0 1 714.56641 319.88086 A 63.91907 63.91907 0 0 1 778.48438 255.96289 z",{
			fill: initialColors["centerLineColor"],
			id: 'ezFaceOffCircles',
			visible: true,
			selectable:false,
			evented: false
        });
        
        creaseStroke1 = new fabric.Path("M 93.875 205.37891 L 93.875 208.01953 L 112.77539 208.01953 C 112.77539 208.01953 123.42667 220.89124 112.77539 239.98047 L 93.875 239.98047 L 93.875 242.62109 L 114.32617 242.62109 L 115.08008 241.26953 C 120.71127 231.17724 120.80176 222.38351 119.33984 216.23047 C 117.87792 210.07742 114.81445 206.33789 114.81445 206.33789 L 114.01758 205.37891 L 93.875 205.37891 z M 845.70117 205.37891 L 844.9043 206.33789 C 844.9043 206.33789 841.84082 210.07742 840.37891 216.23047 C 838.91699 222.38351 839.00748 231.17724 844.63867 241.26953 L 845.39258 242.62109 L 865.84375 242.62109 L 865.84375 239.98047 L 846.94336 239.98047 C 836.29208 220.89124 846.94336 208.01953 846.94336 208.01953 L 865.84375 208.01953 L 865.84375 205.37891 L 845.70117 205.37891 z",{
			fill: initialColors["creaseStrokeColor"],
			id: 'creaseStroke1',
			visible: true,
			selectable:false,
			evented: false
        });

        creaseFill1 = new fabric.Path("M 92.875 207.01953 L 92.875 240.98047 L 113.36328 240.98047 L 113.64844 240.4668 C 115.82642 236.56341 117.1401 232.90377 117.84375 229.53125 C 118.40641 226.83451 118.57674 224.33248 118.48633 222.05273 C 118.41403 220.22967 118.17577 218.55145 117.83984 217.0332 C 117.60924 215.99098 116.18311 210.57097 113.54492 207.38281 L 113.24609 207.01953 L 92.875 207.01953 z M 846.47266 207.01953 L 846.17383 207.38281 C 843.53564 210.57097 842.10951 215.99098 841.87891 217.0332 C 841.54298 218.55145 841.30473 220.22967 841.23242 222.05273 C 841.14202 224.33248 841.31232 226.83451 841.875 229.53125 C 842.57865 232.90377 843.89233 236.56341 846.07031 240.4668 L 846.35547 240.98047 L 866.84375 240.98047 L 866.84375 207.01953 L 846.47266 207.01953 z",{
			fill: initialColors["creaseFillColor"],
			id: 'creaseFill1',
			visible: true,
			selectable:false,
			evented: false
        });

		creaseStroke2 = new fabric.Path("M 93.875 205.37109 L 93.875 208.01953 L 112.77539 208.01953 L 112.77539 239.98047 L 93.875 239.98047 L 93.875 242.62695 L 115.42578 242.62695 L 115.42578 205.37109 L 93.875 205.37109 z M 844.29297 205.37109 L 844.29297 242.62695 L 865.84375 242.62695 L 865.84375 239.98047 L 846.94336 239.98047 L 846.94336 208.01953 L 865.84375 208.01953 L 865.84375 205.37109 L 844.29297 205.37109 z ",{
			fill: initialColors["creaseStrokeColor"],
			id: 'creaseStroke2',
			visible: false,
			selectable:false,
			evented: false
        });

        creaseFill2= new fabric.Path("M 93.875 208.01953 L 93.875 239.98047 L 112.77539 239.98047 L 112.77539 208.01953 L 93.875 208.01953 z M 846.94336 208.01953 L 846.94336 239.98047 L 865.84375 239.98047 L 865.84375 208.01953 L 846.94336 208.01953 z",{
			fill: initialColors["rinkColor"],
			id: 'creaseFill2',
			visible: false,
			selectable:false,
			evented: false
        });

		creaseStroke3 = new fabric.Path("M 93.875 194.30078 L 93.875 196.98242 A 27.136588 27.136588 0 0 1 112.03125 205.37109 L 93.875 205.37109 L 93.875 208.01953 L 112.77539 208.01953 L 112.77539 239.98047 L 93.875 239.98047 L 93.875 242.62695 L 112.10352 242.62695 A 27.136588 27.136588 0 0 1 93.875 251.0918 L 93.875 253.69727 C 109.57206 252.91149 122.10742 239.88422 122.10742 223.99609 C 122.10742 208.10799 109.57206 195.08621 93.875 194.30078 z M 865.84375 194.30078 C 850.14671 195.08655 837.61133 208.11383 837.61133 224.00195 C 837.61133 239.89005 850.14671 252.91183 865.84375 253.69727 L 865.84375 251.01562 A 27.136588 27.136588 0 0 1 847.6875 242.62695 L 865.84375 242.62695 L 865.84375 239.97852 L 846.94336 239.97852 L 846.94336 208.01758 L 865.84375 208.01758 L 865.84375 205.37109 L 847.61523 205.37109 A 27.136588 27.136588 0 0 1 865.84375 196.90625 L 865.84375 194.30078 z M 844.29297 209.69336 L 844.29297 238.23438 A 27.136588 27.136588 0 0 1 840.20898 224 A 27.136588 27.136588 0 0 1 844.29297 209.69336 z M 115.42578 209.76367 A 27.136588 27.136588 0 0 1 119.50977 223.99805 A 27.136588 27.136588 0 0 1 115.42578 238.30469 L 115.42578 209.76367 z",{
			fill: initialColors["creaseStrokeColor"],
			id: 'creaseStroke3',
			visible: false,
			selectable:false,
			evented: false
        });

        creaseFill3= new fabric.Path("M 93.875 196.91797 L 93.875 251.08008 A 27.136588 27.136588 0 0 0 119.50977 223.99805 A 27.136588 27.136588 0 0 0 93.875 196.91797 z M 865.84375 196.91797 A 27.136588 27.136588 0 0 0 840.20898 224 A 27.136588 27.136588 0 0 0 865.84375 251.08008 L 865.84375 196.91797 z",{
			fill: initialColors["rinkColor"],
			id: 'creaseFill3',
			visible: false,
			selectable:false,
			evented: false
        });

		creaseStroke4 = new fabric.Path("M 93.875 194.30078 L 93.875 196.98242 A 27.136588 27.136588 0 0 1 119.50977 223.99805 A 27.136588 27.136588 0 0 1 93.875 251.0918 L 93.875 253.69727 C 109.57206 252.91149 122.10742 239.88422 122.10742 223.99609 C 122.10742 208.10799 109.57206 195.08621 93.875 194.30078 z M 865.84375 194.30078 C 850.14671 195.08655 837.61133 208.11383 837.61133 224.00195 C 837.61133 239.89005 850.14671 252.91183 865.84375 253.69727 L 865.84375 251.01562 A 27.136588 27.136588 0 0 1 840.20898 224 A 27.136588 27.136588 0 0 1 865.84375 196.90625 L 865.84375 194.30078 z",{
			fill: initialColors["creaseStrokeColor"],
			id: 'creaseStroke4',
			visible: false,
			selectable:false,
			evented: false
        });

        creaseFill4= new fabric.Path("M 93.875 196.91797 L 93.875 251.08008 A 27.136588 27.136588 0 0 0 119.50977 223.99805 A 27.136588 27.136588 0 0 0 93.875 196.91797 z M 865.84375 196.91797 A 27.136588 27.136588 0 0 0 840.20898 224 A 27.136588 27.136588 0 0 0 865.84375 251.08008 L 865.84375 196.91797 z",{
			fill: initialColors["creaseFillColor"],
			id: 'creaseFill4',
			visible: false,
			selectable:false,
			evented: false
        });

        centerDot = new fabric.Path("M 480.32422 221.75391 A 2.127 2.127 0 0 0 478.19531 223.88086 A 2.127 2.127 0 0 0 480.32422 226.00977 A 2.127 2.127 0 0 0 482.45117 223.88086 A 2.127 2.127 0 0 0 480.32422 221.75391 z",{
			fill: initialColors["centerDotColor"],
			id: 'centerDot',
			visible: true,
			selectable:false,
			evented: false
        });

		//below.add(backgroundColor)
        below.add(centerCircle)
        below.add(centerLineStroke)
        below.add(centerLine1)
		below.add(centerLine2)
		below.add(centerLine3)
		below.add(centerLine4)
		below.add(centerLine5)
		below.add(centerLine6)
		below.add(centerLine7)
		below.add(centerLineBoards)
        below.add(blueLines)
        //below.add(trapezoidFill)
        below.add(trapezoidStroke)
        below.add(creaseFill1)
        below.add(creaseStroke1)
		below.add(creaseFill2)
		below.add(creaseStroke2)
		below.add(creaseFill3)
		below.add(creaseStroke3)
		below.add(creaseFill4)
		below.add(creaseStroke4)
        below.add(goalLines)
        below.add(nzFaceOffSpots)
        below.add(ezFaceOffSpots)
        below.add(ezFaceOffLines)
        below.add(ezFaceOffCircles)
        below.add(centerDot)

        //backgroundColor.sendToBack()
        below.renderAll()
    }

    $("#rinkColor").spectrum({
		showInput: true,
		preferredFormat: prefColorFormat,
		showInitial: true,
		showPalette: true,
		showButtons: true,
		showSelectionPalette: true,
		localStorageKey: "spectrum.rinkfactory",
		palette: [ "#eef0f2" ],
		color: initialColors["rinkColor"],
		show: function(color) {
			original_color = color;
			$(this).data('changed', false);
		},
		move: function(color) {
			$(this).data('changed', true);
            below.setBackgroundColor(color.toHexString(), below.renderAll.bind(below))
            var objects = below.getObjects();
			for (x in objects) {
				if (objects[x].id == 'strokeCenterLine') {
					objects[x].set('fill', color.toHexString())
					//objects[x].fill = color.toHexString();
                    below.renderAll()
				}
			}
		},
		change: function(color) {
			$(this).data('changed', true);
			below.setBackgroundColor(color.toHexString(), below.renderAll.bind(below))
            var objects = below.getObjects();
			for (x in objects) {
				console.log(objects[x].id)
				if (objects[x].id == 'strokeCenterLine') {
                    objects[x].set('fill', color.toHexString())
					//objects[x].fill = color.toHexString();
                    below.renderAll()
				}
			}
		},
		hide: function(color) {
			if ($(this).data('changed')) {
				below.setBackgroundColor(color.toHexString(), below.renderAll.bind(below))
                var objects = below.getObjects();
                for (x in objects) {
                    if (objects[x].id == 'strokeCenterLine') {
                        objects[x].set('fill', color.toHexString())
					    //objects[x].fill = color.toHexString();
                        below.renderAll()
                    }
                }
			} else {
                below.setBackgroundColor(original_color.toHexString(), below.renderAll.bind(below))
                var objects = below.getObjects();
                for (x in objects) {
                    if (objects[x].id == 'strokeCenterLine') {
                        objects[x].set('fill', original_color.toHexString())
					    //objects[x].fill = color.toHexString();
                        below.renderAll()
                    }
                }
			}
		}
	})

    $(".selector").each(function() {
		var color = $(this).attr('id');
		var change = false;
		if (color == 'transparent') {
			color = null;
		}
		$(this).spectrum({
			showInput: true,
			preferredFormat: prefColorFormat,
			showInitial: true,
			showPalette: true,
			showButtons: true,
			allowEmpty: true,
			showSelectionPalette: true,
			localStorageKey: "spectrum.rinkfactory",
			palette: [ "#C8102E", "#0032a0", "#41b6e6", "#eef0f2" ],
			color: initialColors[$(this).attr('id')],
			show: function(color) {
				var original_color = color;
                $(this).data('changed', false);
			},
			move: function(color) {
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var id = $(this).data('element');
				var objects = below.getObjects();
				for (x in objects) {
                    if (objects[x].id == id) {
                        objects[x].set('fill', colorX);
                    } 						
				}
				reRenderBG();
			},
			change: function(color) {
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var id = $(this).data('element');
				var objects = below.getObjects();
				for (x in objects) {
                    if (objects[x].id == id) {
                        objects[x].set('fill', colorX);
                    } 						
				}
				reRenderBG();
			},
			hide: function(color) {
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var id = $(this).data('element');
				var objects = below.getObjects();
				for (x in objects) {
                    if (objects[x].id == id) {
                        objects[x].set('fill', colorX);
                    } 						
				}
				reRenderBG();
			}
		})
	})

	$(".centerLineSelector").each(function() {
		var color = $(this).attr('id');
		var change = false;
		if (color == 'transparent') {
			color = null;
		}
		$(this).spectrum({
			showInput: true,
			preferredFormat: prefColorFormat,
			showInitial: true,
			showPalette: true,
			showButtons: true,
			allowEmpty: true,
			showSelectionPalette: true,
			localStorageKey: "spectrum.rinkfactory",
			palette: [ "#C8102E", "#0032a0", "#41b6e6", "#eef0f2" ],
			color: initialColors[$(this).attr('id')],
			show: function(color) {
				var original_color = color;
                $(this).data('changed', false);
			},
			move: function(color) {
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var objects = below.getObjects();
				for (x in objects) {
					if (objects[x].id == "centerLineBoards" || objects[x].id.substring(0,10) == "centerLine") {
						objects[x].set('fill', colorX)
					}
				}
				reRenderBG();
			},
			change: function(color) {
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var id = $(this).data('element');
				var objects = below.getObjects();
				for (x in objects) {
					if (objects[x].id == "centerLineBoards" || objects[x].id.substring(0,10) == "centerLine") {
						objects[x].set('fill', colorX)
					}
				}
				reRenderBG();
			},
			hide: function(color) {
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var id = $(this).data('element');
				var objects = below.getObjects();
				for (x in objects) {
					if (objects[x].id == "centerLineBoards" || objects[x].id.substring(0,10) == "centerLine") {
						objects[x].set('fill', colorX)
					}
				}
				reRenderBG();
			}
		})
	})

    $(".multiSelector").each(function() {
		var color = $(this).attr('id');
		var change = false;
		if (color == 'transparent') {
			color = null;
		}
		$(this).spectrum({
			showInput: true,
			preferredFormat: prefColorFormat,
			showInitial: true,
			showPalette: true,
			showButtons: true,
			allowEmpty: true,
			showSelectionPalette: true,
			localStorageKey: "spectrum.rinkfactory",
			palette: [ "#C8102E", "#0032a0", "#41b6e6", "#eef0f2" ],
			color: initialColors[$(this).attr('id')],
			show: function(color) {
				var original_color = color;
                $(this).data('changed', false);
			},
			move: function(color) {
                var elLength = $(this).data('element').length;
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var id = $(this).data('element');
                var objects = below.getObjects();
				for (x in objects) {
                    if (objects[x].id.substring(0, elLength) == id) {
                        objects[x].set('fill', colorX);
                    } 						
				}
				reRenderBG();
			},
			change: function(color) {
                var elLength = $(this).data('element').length;
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var id = $(this).data('element');
                var objects = below.getObjects();
				for (x in objects) {
                    if (objects[x].id.substring(0, elLength) == id) {
                        objects[x].set('fill', colorX);
                    } 						
				}
				reRenderBG();
			},
			hide: function(color) {
                var elLength = $(this).data('element').length;
                if (color == null) {
					var colorX = "transparent";
				} else {
					colorX = color.toHexString();
				}
				$(this).data('changed', true);
				var id = $(this).data('element');
                var objects = below.getObjects();
				for (x in objects) {
                    if (objects[x].id.substring(0, elLength) == id) {
                        objects[x].set('fill', colorX);
                    } 						
				}
				reRenderBG();
			}
		})
	})

    $("#creaseStyle").on("change", function() {
		var id = $(this).val();
		var objects = below.getObjects();
		for (x in objects) {
			if (objects[x].id.substring(0,6) == "crease") {
				if (objects[x].id.charAt(objects[x].id.length -1) == id) {
					if (objects[x].id.substring(0,7) == "creaseF") {
						$("#creaseFillColor").spectrum("set", objects[x].fill)
					}
					objects[x].visible = true;
				} else {
					objects[x].visible = false;
				}
			}
		}
		reRenderBG()
	})

	$("#centerLineStyle").on("change", function() {
		var id = $(this).val();
		var objects = below.getObjects();
		for (x in objects) {
			if (objects[x].id.substring(0,10) == "centerLine" && objects[x].id != "centerLineBoards") {
				if (objects[x].id.charAt(objects[x].id.length -1) == id) {
					objects[x].visible = true;
				} else {
					objects[x].visible = false;
				}
			}
		}
		reRenderBG()
	})
	
	$(".belowTextureToggle").on("click",function() {
		if ($(this).is(':checked')) {
			state = true;
		} else {
			state = false;
		}
		var id = $(this).data("id");
		var objects = below.getObjects();
		for (x in objects) {
			if (objects[x].id == id) {
				if (state == true) {
					objects[x].visible = true;
				} else {
					objects[x].visible = false;
				}
			}
		}
		var objects = overlayGroup.getObjects();
		for (x in objects) {
			if (objects[x].id == id) {
				if (state == true) {
					objects[x].visible = true;
				} else {
					objects[x].visible = false;
				}
			}
			overlayGroup.addWithUpdate();
		}
		below.renderAll();
	})

	$(".aboveTextureToggle").on("click",function() {
		if ($(this).is(':checked')) {
			state = true;
		} else {
			state = false;
		}
		var id = $(this).data("id");
		console.log(id)
		var objects = above.getObjects();
		for (x in objects) {
			if (objects[x].id == id) {
				if (state == true) {
					objects[x].visible = true;
				} else {
					objects[x].visible = false;
				}
			}
		}
		reRenderBG();
	})

    $(".multiToggle").on("click",function() {
		if ($(this).is(':checked')) {
			state = true;
		} else {
			state = false;
		}
        var elLength = $(this).data("id").length
		var id = $(this).data("id");
		var objects = below.getObjects();
		for (x in objects) {
			if (objects[x].id.substring(0,elLength) == id) {
				if (state == true) {
					objects[x].visible = true;
				} else {
					objects[x].visible = false;
				}
			}
		}
		reRenderBG();
	})

    $("#fakeImageButton").on("click",function() {
		console.log("clicky!")
		$.ajax({
			type: "GET",
			url: "http://127.0.0.1:8086/uploadImage",
			success: function(data) {
				console.log(data)
				var imgObj = new Image();
				imgObj.src = data.image;
				$("#fileName").html(data.filename);
				imgObj.onload = function () {
					// start fabricJS stuff
					var image = new fabric.Image(imgObj);
					image.set({
						originX: 'center',
						originY: 'center',
						left: imLeft,
						top: imTop,
						perPixelTargetFind: true,
						centeredScaling: true,
						centeredRotation: true,
						name: data.filename,
						borderColor: 'red',
						cornerColor: 'yellow',
						cornerSize: 12,
						transparentCorners: false,
						id: data.filename
					});
					image.filters.push(new fabric.Image.filters.Resize({
						resizeType: 'lanczos', // typo fixed
						lanczosLobes: 2 // typo fixed
					}));
					image.on('object:modified',function() {
						imLeft = image.get('left')
						imTop = image.get('top');
					})
					var h = image.height;
					var w = image.width;
					//if ((h > 300) || (w > 300)) {
					//	image.scale(0.5);
					//}
					below.add(image);
					image.sendToBack();
					below.renderAll();
					//image.bringForward();
					
					// end fabricJS stuff
				}
			}
		});
	})
	
	$("#save").on("click",function(e) {
		var startYear = parseInt($("#startYear").val());
		var endYear = parseInt($("#endYear").val())
		var yearRange = "";
		var teamName = "";
		if (startYear > endYear && endYear > 0) {
			alert("The start year has to be before or equal to the end year!");
			return false;
		}
		if (startYear == endYear && startYear > 0) {
			yearRange = $("#startYear").val();
		} else if (startYear == 0 && endYear > 0) {
			yearRange = $("#endYear").val();
		} else if (startYear > 0 && endYear == 0) {
			yearRange = $("#startYear").val();
		} else if (startYear > 0 && endYear > 0) {
			yearRange = $("#startYear").val()+"-"+$("#endYear").val()
		} else {
			yearRange = ""
		}
		if (yearRange.length > 0) {
			yearRange = "_"+yearRange;
		}
		if ($("#teamName").val().length == 0) {
			teamName = "Unknown_Team";
		} else {
			teamName = $("#teamName").val().replace(/[|&;$%@"<>()+,]/g, "");
		}
		//teamName = teamName.replace(/([^a-zA-Z0-9]+)/g, "_");
		teamName = teamName.split(' ').join('_');
		var fileName = "rink_"+teamName+yearRange;
		
		belowFull.setBackgroundColor($("#rinkColor").spectrum("get").toHexString(), belowFull.renderAll.bind(belowFull))

		objects = below.getObjects('image')
		for (x in objects) {
			belowFull.add(objects[x])
		}

		objects = below.getObjects('path')
		for (x in objects) {
			belowFull.add(objects[x])
		}

		objects = belowFull.getObjects()
		for (x in objects) {
			objects[x].set({
				scaleX: objects[x].scaleX * 3,
				scaleY: objects[x].scaleY * 3,
				left: objects[x].left * 3,
				top: objects[x].top * 3 
			})
		}

		belowFull.renderAll();

		objects = below.getObjects('image')
		for (x in objects) {
			objects[x].set({
				scaleX: 1,
				scaleY: 1,
				left: objects[x].left / 3,
				top: objects[x].top / 3 
			})
		}

		objects = below.getObjects('path')
		for (x in objects) {
			objects[x].set({
				scaleX: 1,
				scaleY: 1,
				left: objects[x].left / 3,
				top: objects[x].top / 3 
			})
		}

		below.renderAll()

		new CanvasSaver('http://127.0.0.1:8086/saveJersey').savePNG(document.getElementById("belowFull"), fileName, "rink");

		var objects = belowFull.getObjects()
		for (x in objects) {
			belowFull.remove(objects[x])
		}

		below.renderAll()
	})
	
	function reRenderBG() {
 		
		below.renderAll();
	}
    
    function getDataUri(url, callback) {
		var image = new Image();
		
		image.onload = function () {
			var canvas = document.createElement('canvas');
			canvas.width = this.naturalWidth; // or 'width' if you want a special/scaled size
			canvas.height = this.naturalHeight; // or 'height' if you want a special/scaled size
			
			canvas.getContext('2d').drawImage(this, 0, 0);
			
			callback(canvas.toDataURL('image/png'));
		};
		
		image.src = url;
	}

	fabric.Canvas.prototype.getItem = function(id) {
		var object = null,
			objects = this.getObjects();

		for (var i = 0, len = this.size(); i < len; i++) {
			if (objects[i].id && objects[i].id === id) {
				object = objects[i];
				break;
			}
		}

		return object;
	};

	Modernizr.addTest('canvasblending', function() {
		if ( ! Modernizr.canvas ) return false;
		var canvas = document.createElement('canvas');
		canvas.width = 1;
		canvas.height = 1;
		var ctx = canvas.getContext('2d');
		ctx.fillStyle = '#000';
		ctx.fillRect(0,0,1,1);
		ctx.globalCompositeOperation = 'multiply';
		ctx.fillStyle = '#fff';
		ctx.fillRect(0,0,1,1);
		return ctx.getImageData(0,0,1,1).data[0] === 0;
	});

	function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        
        return true;
    }
    
</script>
</head>    
</html>